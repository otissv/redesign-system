{"version":3,"file":"index.min.js","sources":["../src/utils.js","../src/Tippy.js","../src/TippyGroup.js"],"sourcesContent":["export function preserveRef(ref, node) {\n  if (ref) {\n    if (typeof ref === 'function') {\n      ref(node)\n    }\n    if ({}.hasOwnProperty.call(ref, 'current')) {\n      ref.current = node\n    }\n  }\n}\n\nexport function ssrSafeCreateDiv() {\n  return typeof document !== 'undefined' && document.createElement('div')\n}\n\nexport function updateClassName(tooltip, action, classNames) {\n  classNames.split(/\\s+/).forEach(name => {\n    if (name) {\n      tooltip.classList[action](name)\n    }\n  })\n}\n","import React, {\n  forwardRef,\n  cloneElement,\n  useState,\n  useRef,\n  useEffect,\n  useLayoutEffect,\n} from 'react'\nimport { createPortal } from 'react-dom'\nimport PropTypes from 'prop-types'\nimport tippy from 'tippy.js'\nimport { ssrSafeCreateDiv, preserveRef, updateClassName } from './utils'\n\n// React currently throws a warning when using useLayoutEffect\n// on the server. To get around it, we can conditionally\n// useEffect on the server (no-op) and useLayoutEffect in the\n// browser. We need useLayoutEffect because we want Tippy to\n// perform sync mutations to the DOM elements after renders\n// to prevent jitters/jumps, especially when updating content.\nconst useIsomorphicLayoutEffect =\n  typeof window !== 'undefined' && typeof document !== 'undefined'\n    ? useLayoutEffect\n    : useEffect\n\nfunction Tippy({\n  children,\n  content,\n  className,\n  onCreate,\n  isVisible,\n  isEnabled = true,\n  ignoreAttributes = true,\n  multiple = true,\n  ...restOfNativeProps\n}) {\n  const [isMounted, setIsMounted] = useState(false)\n  const containerRef = useRef(ssrSafeCreateDiv())\n  const targetRef = useRef()\n  const instanceRef = useRef()\n  const isControlledMode = typeof isVisible === 'boolean'\n\n  const options = {\n    ignoreAttributes,\n    multiple,\n    ...restOfNativeProps,\n    content: containerRef.current,\n  }\n\n  if (isControlledMode) {\n    options.trigger = 'manual'\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    instanceRef.current = tippy(targetRef.current, options)\n\n    if (onCreate) {\n      onCreate(instanceRef.current)\n    }\n\n    if (!isEnabled) {\n      instanceRef.current.disable()\n    }\n\n    if (isVisible) {\n      instanceRef.current.show()\n    }\n\n    setIsMounted(true)\n\n    return () => {\n      instanceRef.current.destroy()\n      instanceRef.current = null\n    }\n  }, [])\n\n  useIsomorphicLayoutEffect(() => {\n    if (!isMounted) {\n      return\n    }\n\n    instanceRef.current.set(options)\n\n    if (isEnabled) {\n      instanceRef.current.enable()\n    } else {\n      instanceRef.current.disable()\n    }\n\n    if (isControlledMode) {\n      if (isVisible) {\n        instanceRef.current.show()\n      } else {\n        instanceRef.current.hide()\n      }\n    }\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    if (className) {\n      const { tooltip } = instanceRef.current.popperChildren\n      updateClassName(tooltip, 'add', className)\n      return () => {\n        updateClassName(tooltip, 'remove', className)\n      }\n    }\n  }, [className])\n\n  return (\n    <>\n      {cloneElement(children, {\n        ref: node => {\n          targetRef.current = node\n          preserveRef(children.ref, node)\n        },\n      })}\n      {isMounted && createPortal(content, containerRef.current)}\n    </>\n  )\n}\n\nTippy.propTypes = {\n  content: PropTypes.oneOfType([PropTypes.string, PropTypes.element])\n    .isRequired,\n  children: PropTypes.element.isRequired,\n  onCreate: PropTypes.func,\n  isVisible: PropTypes.bool,\n  isEnabled: PropTypes.bool,\n  className: PropTypes.string,\n}\n\nexport default forwardRef(function TippyWrapper({ children, ...props }, ref) {\n  return (\n    <Tippy {...props}>\n      {cloneElement(children, {\n        ref: node => {\n          preserveRef(ref, node)\n          preserveRef(children.ref, node)\n        },\n      })}\n    </Tippy>\n  )\n})\n","import { Children, cloneElement, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport tippy from 'tippy.js'\n\nexport default function TippyGroup({ children, ...props }) {\n  const instancesRef = useRef([])\n\n  useEffect(() => {\n    tippy.group(instancesRef.current, props)\n    return () => {\n      instancesRef.current = null\n    }\n  }, [])\n\n  return Children.map(children, child => {\n    return cloneElement(child, {\n      onCreate: instance => {\n        if (child.props.onCreate) {\n          child.props.onCreate(instance)\n        }\n        instancesRef.current.push(instance)\n      },\n    })\n  })\n}\n\nTippyGroup.propTypes = {\n  children: PropTypes.arrayOf(PropTypes.element).isRequired,\n}\n"],"names":["preserveRef","ref","node","hasOwnProperty","call","current","updateClassName","tooltip","action","classNames","split","forEach","name","classList","useIsomorphicLayoutEffect","window","document","useLayoutEffect","useEffect","Tippy","children","content","className","onCreate","isVisible","isEnabled","ignoreAttributes","multiple","restOfNativeProps","useState","isMounted","setIsMounted","containerRef","useRef","createElement","targetRef","instanceRef","isControlledMode","options","trigger","tippy","disable","show","destroy","set","enable","hide","popperChildren","React","cloneElement","createPortal","propTypes","PropTypes","oneOfType","string","element","isRequired","func","bool","forwardRef","props","TippyGroup","instancesRef","group","Children","map","child","instance","push","arrayOf"],"mappings":"ojBAAO,SAASA,EAAYC,EAAKC,GAC3BD,IACiB,mBAARA,GACTA,EAAIC,GAEF,GAAGC,eAAeC,KAAKH,EAAK,aAC9BA,EAAII,QAAUH,IASpB,SAAgBI,EAAgBC,EAASC,EAAQC,GAC/CA,EAAWC,MAAM,OAAOC,QAAQ,SAAAC,GAC1BA,GACFL,EAAQM,UAAUL,GAAQI,KCChC,IAAME,EACc,oBAAXC,QAA8C,oBAAbC,SACpCC,EACAC,EAEN,SAASC,SACPC,IAAAA,SACAC,IAAAA,QACAC,IAAAA,UACAC,IAAAA,SACAC,IAAAA,cACAC,UAAAA,oBACAC,iBAAAA,oBACAC,SAAAA,gBACGC,6GAE+BC,GAAS,GAApCC,OAAWC,OACZC,EAAeC,EDxBM,oBAAbjB,UAA4BA,SAASkB,cAAc,QCyB3DC,EAAYF,IACZG,EAAcH,IACdI,EAAwC,kBAAdb,EAE1Bc,KACJZ,iBAAAA,EACAC,SAAAA,GACGC,GACHP,QAASW,EAAa3B,iBAGpBgC,IACFC,EAAQC,QAAU,UAGpBzB,EAA0B,kBACxBsB,EAAY/B,QAAUmC,EAAML,EAAU9B,QAASiC,GAE3Cf,GACFA,EAASa,EAAY/B,SAGlBoB,GACHW,EAAY/B,QAAQoC,UAGlBjB,GACFY,EAAY/B,QAAQqC,OAGtBX,GAAa,GAEN,WACLK,EAAY/B,QAAQsC,UACpBP,EAAY/B,QAAU,OAEvB,IAEHS,EAA0B,WACnBgB,IAILM,EAAY/B,QAAQuC,IAAIN,GAEpBb,EACFW,EAAY/B,QAAQwC,SAEpBT,EAAY/B,QAAQoC,UAGlBJ,IACEb,EACFY,EAAY/B,QAAQqC,OAEpBN,EAAY/B,QAAQyC,WAK1BhC,EAA0B,cACpBQ,EAAW,KACLf,EAAY6B,EAAY/B,QAAQ0C,eAAhCxC,eACRD,EAAgBC,EAAS,MAAOe,GACzB,WACLhB,EAAgBC,EAAS,SAAUe,MAGtC,CAACA,IAGF0B,gCACGC,EAAa7B,EAAU,CACtBnB,IAAK,SAAAC,GACHiC,EAAU9B,QAAUH,EACpBF,EAAYoB,EAASnB,IAAKC,MAG7B4B,GAAaoB,EAAa7B,EAASW,EAAa3B,UAKvDc,EAAMgC,UAAY,CAChB9B,QAAS+B,EAAUC,UAAU,CAACD,EAAUE,OAAQF,EAAUG,UACvDC,WACHpC,SAAUgC,EAAUG,QAAQC,WAC5BjC,SAAU6B,EAAUK,KACpBjC,UAAW4B,EAAUM,KACrBjC,UAAW2B,EAAUM,KACrBpC,UAAW8B,EAAUE,QAGvB,MAAeK,EAAW,WAA8C1D,OAAtBmB,IAAAA,SAAawC,2BAE3DZ,gBAAC7B,EAAUyC,EACRX,EAAa7B,EAAU,CACtBnB,IAAK,SAAAC,GACHF,EAAYC,EAAKC,GACjBF,EAAYoB,EAASnB,IAAKC,SCpIrB,SAAS2D,SAAazC,IAAAA,SAAawC,oBAC1CE,EAAe7B,EAAO,WAE5Bf,EAAU,kBACRsB,EAAMuB,MAAMD,EAAazD,QAASuD,GAC3B,WACLE,EAAazD,QAAU,OAExB,IAEI2D,EAASC,IAAI7C,EAAU,SAAA8C,UACrBjB,EAAaiB,EAAO,CACzB3C,SAAU,SAAA4C,GACJD,EAAMN,MAAMrC,UACd2C,EAAMN,MAAMrC,SAAS4C,GAEvBL,EAAazD,QAAQ+D,KAAKD,QAMlCN,EAAWV,UAAY,CACrB/B,SAAUgC,EAAUiB,QAAQjB,EAAUG,SAASC"}