{"version":3,"file":"index.js","sources":["../src/utils.js","../src/Tippy.js","../src/TippyGroup.js"],"sourcesContent":["export function preserveRef(ref, node) {\n  if (ref) {\n    if (typeof ref === 'function') {\n      ref(node)\n    }\n    if ({}.hasOwnProperty.call(ref, 'current')) {\n      ref.current = node\n    }\n  }\n}\n\nexport function ssrSafeCreateDiv() {\n  return typeof document !== 'undefined' && document.createElement('div')\n}\n\nexport function updateClassName(tooltip, action, classNames) {\n  classNames.split(/\\s+/).forEach(name => {\n    if (name) {\n      tooltip.classList[action](name)\n    }\n  })\n}\n","import React, {\n  forwardRef,\n  cloneElement,\n  useState,\n  useRef,\n  useEffect,\n  useLayoutEffect,\n} from 'react'\nimport { createPortal } from 'react-dom'\nimport PropTypes from 'prop-types'\nimport tippy from 'tippy.js'\nimport { ssrSafeCreateDiv, preserveRef, updateClassName } from './utils'\n\n// React currently throws a warning when using useLayoutEffect\n// on the server. To get around it, we can conditionally\n// useEffect on the server (no-op) and useLayoutEffect in the\n// browser. We need useLayoutEffect because we want Tippy to\n// perform sync mutations to the DOM elements after renders\n// to prevent jitters/jumps, especially when updating content.\nconst useIsomorphicLayoutEffect =\n  typeof window !== 'undefined' && typeof document !== 'undefined'\n    ? useLayoutEffect\n    : useEffect\n\nfunction Tippy({\n  children,\n  content,\n  className,\n  onCreate,\n  isVisible,\n  isEnabled = true,\n  ignoreAttributes = true,\n  multiple = true,\n  ...restOfNativeProps\n}) {\n  const [isMounted, setIsMounted] = useState(false)\n  const containerRef = useRef(ssrSafeCreateDiv())\n  const targetRef = useRef()\n  const instanceRef = useRef()\n  const isControlledMode = typeof isVisible === 'boolean'\n\n  const options = {\n    ignoreAttributes,\n    multiple,\n    ...restOfNativeProps,\n    content: containerRef.current,\n  }\n\n  if (isControlledMode) {\n    options.trigger = 'manual'\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    instanceRef.current = tippy(targetRef.current, options)\n\n    if (onCreate) {\n      onCreate(instanceRef.current)\n    }\n\n    if (!isEnabled) {\n      instanceRef.current.disable()\n    }\n\n    if (isVisible) {\n      instanceRef.current.show()\n    }\n\n    setIsMounted(true)\n\n    return () => {\n      instanceRef.current.destroy()\n      instanceRef.current = null\n    }\n  }, [])\n\n  useIsomorphicLayoutEffect(() => {\n    if (!isMounted) {\n      return\n    }\n\n    instanceRef.current.set(options)\n\n    if (isEnabled) {\n      instanceRef.current.enable()\n    } else {\n      instanceRef.current.disable()\n    }\n\n    if (isControlledMode) {\n      if (isVisible) {\n        instanceRef.current.show()\n      } else {\n        instanceRef.current.hide()\n      }\n    }\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    if (className) {\n      const { tooltip } = instanceRef.current.popperChildren\n      updateClassName(tooltip, 'add', className)\n      return () => {\n        updateClassName(tooltip, 'remove', className)\n      }\n    }\n  }, [className])\n\n  return (\n    <>\n      {cloneElement(children, {\n        ref: node => {\n          targetRef.current = node\n          preserveRef(children.ref, node)\n        },\n      })}\n      {isMounted && createPortal(content, containerRef.current)}\n    </>\n  )\n}\n\nTippy.propTypes = {\n  content: PropTypes.oneOfType([PropTypes.string, PropTypes.element])\n    .isRequired,\n  children: PropTypes.element.isRequired,\n  onCreate: PropTypes.func,\n  isVisible: PropTypes.bool,\n  isEnabled: PropTypes.bool,\n  className: PropTypes.string,\n}\n\nexport default forwardRef(function TippyWrapper({ children, ...props }, ref) {\n  return (\n    <Tippy {...props}>\n      {cloneElement(children, {\n        ref: node => {\n          preserveRef(ref, node)\n          preserveRef(children.ref, node)\n        },\n      })}\n    </Tippy>\n  )\n})\n","import { Children, cloneElement, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport tippy from 'tippy.js'\n\nexport default function TippyGroup({ children, ...props }) {\n  const instancesRef = useRef([])\n\n  useEffect(() => {\n    tippy.group(instancesRef.current, props)\n    return () => {\n      instancesRef.current = null\n    }\n  }, [])\n\n  return Children.map(children, child => {\n    return cloneElement(child, {\n      onCreate: instance => {\n        if (child.props.onCreate) {\n          child.props.onCreate(instance)\n        }\n        instancesRef.current.push(instance)\n      },\n    })\n  })\n}\n\nTippyGroup.propTypes = {\n  children: PropTypes.arrayOf(PropTypes.element).isRequired,\n}\n"],"names":["preserveRef","ref","node","hasOwnProperty","call","current","ssrSafeCreateDiv","document","createElement","updateClassName","tooltip","action","classNames","split","forEach","name","classList","useIsomorphicLayoutEffect","window","useLayoutEffect","useEffect","Tippy","children","content","className","onCreate","isVisible","isEnabled","ignoreAttributes","multiple","restOfNativeProps","useState","isMounted","setIsMounted","containerRef","useRef","targetRef","instanceRef","isControlledMode","options","trigger","tippy","disable","show","destroy","set","enable","hide","popperChildren","React","cloneElement","createPortal","propTypes","PropTypes","oneOfType","string","element","isRequired","func","bool","forwardRef","TippyWrapper","props","TippyGroup","instancesRef","group","Children","map","child","instance","push","arrayOf"],"mappings":"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"}