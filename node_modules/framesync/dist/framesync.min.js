!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.framesync={})}(this,function(e){"use strict";var n=0,t="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),o=Math.max(0,16.7-(t-n));n=t+o,setTimeout(function(){return e(n)},o)},o=function(){};"production"!==process.env.NODE_ENV&&(o=function(e,n){if(!e)throw new Error("Hey, listen! ".toUpperCase()+n)});var r;!function(e){e.Read="read",e.Update="update",e.Render="render",e.PostRender="postRender",e.FixedUpdate="fixedUpdate"}(r||(r={}));var i=1/60*1e3,c=!0,a=!1,d=!1,u={delta:0,timestamp:0},f=[r.Read,r.Update,r.Render,r.PostRender],s=function(e){return a=e},p=f.reduce(function(e,n){var t,r,i,c,d,u,f,p,l,m=(t=s,r=[],i=[],c=0,d=!1,u=0,f=new WeakSet,p=new WeakSet,l={cancel:function(e){var n=i.indexOf(e);f.add(e),-1!==n&&i.splice(n,1)},process:function(e){var n,o;if(d=!0,r=(n=[i,r])[0],(i=n[1]).length=0,c=r.length)for(u=0;u<c;u++)(o=r[u])(e),!0!==p.has(o)||f.has(o)||(l.schedule(o),t(!0));d=!1},schedule:function(e,n,t){void 0===n&&(n=!1),void 0===t&&(t=!1),o("function"==typeof e,"Argument must be a function");var a=t&&d,u=a?r:i;f.delete(e),n&&p.add(e),-1===u.indexOf(e)&&(u.push(e),a&&(c=r.length))}});return e.sync[n]=function(e,n,t){return void 0===n&&(n=!1),void 0===t&&(t=!1),a||w(),m.schedule(e,n,t),e},e.cancelSync[n]=function(e){return m.cancel(e)},e.steps[n]=m,e},{steps:{},sync:{},cancelSync:{}}),l=p.steps,m=p.sync,h=p.cancelSync,v=function(e){return l[e].process(u)},y=function(e){a=!1,u.delta=c?i:Math.max(Math.min(e-u.timestamp,40),1),c||(i=u.delta),u.timestamp=e,d=!0,f.forEach(v),d=!1,a&&(c=!1,t(y))},w=function(){a=!0,c=!0,d||t(y)};e.default=m,e.cancelSync=h,e.getFrameData=function(){return u},Object.defineProperty(e,"__esModule",{value:!0})});
