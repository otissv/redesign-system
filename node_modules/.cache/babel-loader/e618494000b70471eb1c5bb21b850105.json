{"ast":null,"code":"import _toConsumableArray from \"/mnt/Storage/Projects/themed-styled-components/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/mnt/Storage/Projects/themed-styled-components/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/mnt/Storage/Projects/themed-styled-components/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/mnt/Storage/Projects/themed-styled-components/src/Notify/Notify.js\";\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nimport React, { useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { Notifications } from './Notifications';\nimport difference from 'lodash/difference';\nimport cuid from 'cuid';\nexport var NotifyContext = React.createContext();\n\nif (typeof NotifyContext !== 'undefined' && NotifyContext && NotifyContext === Object(NotifyContext) && Object.isExtensible(NotifyContext)) {\n  Object.defineProperty(NotifyContext, '__filemeta', {\n    enumerable: true,\n    configurable: true,\n    value: {\n      name: \"NotifyContext\",\n      filename: \"src/Notify/Notify.js\"\n    }\n  });\n}\n\nexport var Notify = function Notify(_ref) {\n  var children = _ref.children,\n      messages = _ref.messages,\n      timeout = _ref.timeout,\n      themed = _ref.themed,\n      propsRest = _objectWithoutProperties(_ref, [\"children\", \"messages\", \"timeout\", \"themed\"]);\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      notifications = _useState2[0],\n      setNotifications = _useState2[1];\n\n  var newNotificationsRef = useRef([]);\n  useEffect(function () {\n    var _notification = children.map(function (child) {\n      return {\n        id: child.key,\n        component: child\n      };\n    });\n\n    newNotificationsRef.current = difference(_notification, notifications);\n    setNotifications([].concat(_toConsumableArray(notifications), _toConsumableArray(newNotificationsRef.current)));\n  }, [children]);\n  useEffect(function () {\n    var removeNotificationWithTimeout = function removeNotificationWithTimeout() {\n      setNotifications(notifications.filter(function (notification) {\n        return notification.component.props.sticky || !newNotificationsRef.current.filter(function (n) {\n          return n.id === notification.id;\n        });\n      }));\n    };\n\n    setTimeout(removeNotificationWithTimeout, timeout);\n    return function () {\n      clearTimeout(removeNotificationWithTimeout);\n    };\n  }, [newNotificationsRef.current, timeout]);\n\n  function handleOnClose(e) {\n    e.preventDefault();\n    setNotifications(notifications.filter(function (notification) {\n      return notification.id !== e.currentTarget.dataset.uid;\n    }));\n  }\n\n  var context = useMemo(function () {\n    return {\n      notifications: notifications,\n      setNotifications: setNotifications\n    };\n  }, [notifications]);\n  return React.createElement(NotifyContext.Provider, {\n    const: true,\n    value: context,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(Notifications, Object.assign({\n    themed: themed,\n    notification: notifications\n  }, propsRest, {\n    onClose: handleOnClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  })));\n};\n\nif (typeof Notify !== 'undefined' && Notify && Notify === Object(Notify) && Object.isExtensible(Notify)) {\n  Object.defineProperty(Notify, '__filemeta', {\n    enumerable: true,\n    configurable: true,\n    value: {\n      name: \"Notify\",\n      filename: \"src/Notify/Notify.js\"\n    }\n  });\n}\n\nNotify.propTypes = {\n  messages: PropTypes.array,\n  timeout: PropTypes.number\n};\nNotify.defaultProps = {\n  messages: [],\n  timeout: 10000,\n  themed: []\n};\nvar _default = Notify;\nexport default _default;\n\nif (typeof Notify !== 'undefined' && Notify && Notify === Object(Notify) && Object.isExtensible(Notify)) {\n  Object.defineProperty(Notify, '__filemeta', {\n    enumerable: true,\n    configurable: true,\n    value: {\n      name: \"Notify\",\n      filename: \"src/Notify/Notify.js\"\n    }\n  });\n}\n\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(NotifyContext, \"NotifyContext\", \"/mnt/Storage/Projects/themed-styled-components/src/Notify/Notify.js\");\n  reactHotLoader.register(Notify, \"Notify\", \"/mnt/Storage/Projects/themed-styled-components/src/Notify/Notify.js\");\n  reactHotLoader.register(_default, \"default\", \"/mnt/Storage/Projects/themed-styled-components/src/Notify/Notify.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/mnt/Storage/Projects/themed-styled-components/src/Notify/Notify.js"],"names":["React","useContext","useEffect","useMemo","useRef","useState","PropTypes","styled","Notifications","difference","cuid","NotifyContext","createContext","Notify","children","messages","timeout","themed","propsRest","notifications","setNotifications","newNotificationsRef","_notification","map","child","id","key","component","current","removeNotificationWithTimeout","filter","notification","props","sticky","n","setTimeout","clearTimeout","handleOnClose","e","preventDefault","currentTarget","dataset","uid","context","propTypes","array","number","defaultProps"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useMemo, useRef, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { Notifications } from './Notifications'\nimport difference from 'lodash/difference'\nimport cuid from 'cuid'\n\nexport const NotifyContext = React.createContext()\n\nexport const Notify = function Notify({\n  children,\n  messages,\n  timeout,\n  themed,\n  ...propsRest\n}) {\n  const [notifications, setNotifications] = useState([])\n  const newNotificationsRef = useRef([])\n\n  useEffect(() => {\n    const _notification = children.map(child => {\n      return {\n        id: child.key,\n        component: child,\n      }\n    })\n\n    newNotificationsRef.current = difference(_notification, notifications)\n    setNotifications([...notifications, ...newNotificationsRef.current])\n  }, [children])\n\n  useEffect(() => {\n    const removeNotificationWithTimeout = () => {\n      setNotifications(\n        notifications.filter(notification => {\n          return (\n            notification.component.props.sticky ||\n            !newNotificationsRef.current.filter(n => n.id === notification.id)\n          )\n        })\n      )\n    }\n\n    setTimeout(removeNotificationWithTimeout, timeout)\n\n    return () => {\n      clearTimeout(removeNotificationWithTimeout)\n    }\n  }, [newNotificationsRef.current, timeout])\n\n  function handleOnClose(e) {\n    e.preventDefault()\n\n    setNotifications(\n      notifications.filter(notification => {\n        return notification.id !== e.currentTarget.dataset.uid\n      })\n    )\n  }\n\n  const context = useMemo(\n    () => ({\n      notifications,\n      setNotifications,\n    }),\n    [notifications]\n  )\n\n  return (\n    <NotifyContext.Provider const value={context}>\n      <Notifications\n        themed={themed}\n        notification={notifications}\n        {...propsRest}\n        onClose={handleOnClose}\n      />\n    </NotifyContext.Provider>\n  )\n}\n\nNotify.propTypes = {\n  messages: PropTypes.array,\n  timeout: PropTypes.number,\n}\n\nNotify.defaultProps = {\n  messages: [],\n  timeout: 10000,\n  themed: [],\n}\n\nexport default Notify\n"]},"metadata":{},"sourceType":"module"}