'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var parser = require('@babel/parser');
var traverse = _interopDefault(require('@babel/traverse'));
var generator = require('@babel/generator');
var generator__default = _interopDefault(generator);
var get = _interopDefault(require('lodash/get'));

const fromSpecifiers = (specifiers = []) => Array.isArray(specifiers) && specifiers.length > 0
    ? specifiers.map(specifier => get(specifier, 'local.name'))
    : [];
const traverseOnImports = (fn) => (node) => {
    try {
        const ast = parser.parse(node.value, { sourceType: 'module' });
        let populated = [];
        traverse(ast, {
            enter(path) {
                if (path.isImportDeclaration()) {
                    populated = populated.concat(fn(path));
                    return;
                }
            },
        });
        return populated;
    }
    catch (err) {
        return [];
    }
};
const getFullImports = traverseOnImports((path) => [
    get(generator__default(path.node), 'code'),
]);
const getImportsVariables = traverseOnImports((path) => fromSpecifiers(path.node.specifiers));

exports.getFullImports = getFullImports;
exports.getImportsVariables = getImportsVariables;
