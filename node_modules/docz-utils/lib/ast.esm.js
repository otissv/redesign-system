import { parse } from '@babel/parser';
import traverse from '@babel/traverse';

const valueFromTraverse = (condition, predicate = p => p) => (code) => {
    let value = '';
    const ast = parse(code, { plugins: ['jsx'] });
    traverse(ast, {
        enter(path) {
            if (condition(path)) {
                value = predicate(path);
                path.stop();
                return;
            }
        },
    });
    return value;
};
const codeFromNode = (condition) => (code) => valueFromTraverse(condition, p => code.slice(p.node.start, p.node.end))(code);

export { codeFromNode, valueFromTraverse };
