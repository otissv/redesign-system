!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.popcorn={})}(this,function(n){"use strict";var t,r={x:0,y:0,z:0},e=function(n){return"number"==typeof n},u=function(n){return 180*n/Math.PI},a=function(n){return function(t,r,e){return void 0!==e?n(t,r,e):function(e){return n(t,r,e)}}},o=a(function(n,t,r){return Math.min(Math.max(r,n),t)}),i=function(n){return n*Math.PI/180},f=function(n){return n.hasOwnProperty("x")&&n.hasOwnProperty("y")},c=function(n){return f(n)&&n.hasOwnProperty("z")},s=function(n,t){return Math.abs(n-t)},p=function(n,t,r){var e=t-n;return 0===e?1:(r-n)/e},h=function(n,t,r){return-r*n+r*t+n},d=function(){return(d=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var u in t=arguments[r])Object.prototype.hasOwnProperty.call(t,u)&&(n[u]=t[u]);return n}).apply(this,arguments)},l=function(){return(l=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var u in t=arguments[r])Object.prototype.hasOwnProperty.call(t,u)&&(n[u]=t[u]);return n}).apply(this,arguments)},v=function(n,t){return function(r){return Math.max(Math.min(r,t),n)}},m=function(n){return function(t){return"string"==typeof t&&0===t.indexOf(n)}},g=function(n){return n%1?Number(n.toFixed(5)):n},y={test:function(n){return"number"==typeof n},parse:parseFloat,transform:function(n){return n}},b=(l({},y,{transform:v(0,1)}),l({},y,{default:1}),t="%",{test:function(n){return"string"==typeof n&&n.endsWith(t)&&1===n.split(" ").length},parse:parseFloat,transform:function(n){return""+n+t}}),M=(l({},b,{parse:function(n){return b.parse(n)/100},transform:function(n){return b.transform(100*n)}}),v(0,255)),x=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,w=function(n){return void 0!==n.red},O=function(n){return void 0!==n.hue},A=function(n){var t=n.length;return function(r){if("string"!=typeof r)return r;for(var e,u={},a=function(n){return"string"==typeof n?n.split(/,\s*/):[n]}((e=r).substring(e.indexOf("(")+1,e.lastIndexOf(")"))),o=0;o<t;o++)u[n[o]]=void 0!==a[o]?parseFloat(a[o]):1;return u}},F=l({},y,{transform:function(n){return Math.round(M(n))}}),I=m("rgb"),P={test:function(n){return"string"==typeof n?I(n):w(n)},parse:A(["red","green","blue","alpha"]),transform:function(n){var t=n.red,r=n.green,e=n.blue,u=n.alpha;return function(n){var t=n.red,r=n.green,e=n.blue,u=n.alpha;return"rgba("+t+", "+r+", "+e+", "+(void 0===u?1:u)+")"}({red:F.transform(t),green:F.transform(r),blue:F.transform(e),alpha:g(u)})}},R=m("hsl"),E={test:function(n){return"string"==typeof n?R(n):O(n)},parse:A(["hue","saturation","lightness","alpha"]),transform:function(n){var t=n.hue,r=n.saturation,e=n.lightness,u=n.alpha;return function(n){var t=n.hue,r=n.saturation,e=n.lightness,u=n.alpha;return"hsla("+t+", "+r+", "+e+", "+(void 0===u?1:u)+")"}({hue:Math.round(t),saturation:b.transform(g(r)),lightness:b.transform(g(e)),alpha:g(u)})}},S=l({},P,{test:m("#"),parse:function(n){var t="",r="",e="";return n.length>4?(t=n.substr(1,2),r=n.substr(3,2),e=n.substr(5,2)):(t=n.substr(1,1),r=n.substr(2,1),e=n.substr(3,1),t+=t,r+=r,e+=e),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(e,16),alpha:1}}}),j={test:function(n){return"string"==typeof n&&x.test(n)||P.test(n)||E.test(n)||S.test(n)},parse:function(n){return P.test(n)?P.parse(n):E.test(n)?E.parse(n):S.test(n)?S.parse(n):n},transform:function(n){return w(n)?P.transform(n):O(n)?E.transform(n):n}},k=/(-)?(\d[\d\.]*)/g,q=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,U=function(n){var t=n,r=[],e=t.match(q);e&&(t=t.replace(q,"${c}"),r.push.apply(r,e.map(j.parse)));var u=t.match(k);return u&&r.push.apply(r,u.map(y.parse)),r},$=function(n){var t=n,r=0,e=n.match(q),u=e?e.length:0;if(e)for(var a=0;a<u;a++)t=t.replace(e[a],"${c}"),r++;var o=t.match(k),i=o?o.length:0;if(o)for(a=0;a<i;a++)t=t.replace(o[a],"${n}"),r++;return function(n){for(var e=t,a=0;a<r;a++)e=e.replace(a<u?"${c}":"${n}",a<u?j.transform(n[a]):g(n[a]));return e}},z=function(){};"production"!==process.env.NODE_ENV&&(z=function(n,t){if(!n)throw new Error("Hey, listen! ".toUpperCase()+t)});var B=function(n,t,r){var e=n*n,u=t*t;return Math.sqrt(Math.max(0,r*(u-e)+e))},D=[S,P,E],C=function(n){return D.find(function(t){return t.test(n)})},N=function(n){return"'"+n+"' is not an animatable color. Use the equivalent color code instead."},T=function(n,t){var r=C(n),e=C(t);z(!!r,N(n)),z(!!e,N(t)),z(r.transform===e.transform,"Both colors must be hex/RGBA, OR both must be HSLA.");var u=r.parse(n),a=e.parse(t),o=d({},u),i=r===E?h:B;return function(n){for(var t in o)"alpha"!==t&&(o[t]=i(u[t],a[t],n));return o.alpha=h(u.alpha,a.alpha,n),r.transform(o)}},V=function(n,t){return function(r){return t(n(r))}},W=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n.reduce(V)},_=function(n,t){var r=n.slice(),u=r.length,a=n.map(function(n,r){var u=t[r];return e(n)?function(t){return h(n,u,t)}:j.test(n)?T(n,u):H(n,u)});return function(n){for(var t=0;t<u;t++)r[t]=a[t](n);return r}},H=function(n,t){var r=$(n);return z(r(n)===$(t)(n),"Values '"+n+"' and '"+t+"' are of different format, or a value might have changed value type."),W(_(U(n),U(t)),r)},L=function(n,t){return function(r){return h(n,t,r)}};function G(n,t,r){for(var e,u=[],a=r||("number"==typeof(e=n[0])?L:j.test(e)?T:H),o=n.length-1,i=0;i<o;i++){var f=a(n[i],n[i+1]);if(t){var c=Array.isArray(t)?t[i]:t;f=W(c,f)}u.push(f)}return u}var J,K=function(n,t){return void 0===t&&(t=2),t=Math.pow(10,t),Math.round(n*t)/t},Q=function(n,t,r,e){return void 0===e&&(e=0),K(n+r*(t-n)/Math.max(e,r))},X=0,Y="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(n){return window.requestAnimationFrame(n)}:function(n){var t=Date.now(),r=Math.max(0,16.7-(t-X));X=t+r,setTimeout(function(){return n(X)},r)};!function(n){n.Read="read",n.Update="update",n.Render="render",n.PostRender="postRender",n.FixedUpdate="fixedUpdate"}(J||(J={}));var Z=1/60*1e3,nn=!0,tn=!1,rn=!1,en={delta:0,timestamp:0},un=[J.Read,J.Update,J.Render,J.PostRender],an=function(n){return tn=n},on=un.reduce(function(n,t){var r,e,u,a,o,i,f,c,s,p=(r=an,e=[],u=[],a=0,o=!1,i=0,f=new WeakSet,c=new WeakSet,s={cancel:function(n){var t=u.indexOf(n);f.add(n),-1!==t&&u.splice(t,1)},process:function(n){var t,p;if(o=!0,e=(t=[u,e])[0],(u=t[1]).length=0,a=e.length)for(i=0;i<a;i++)(p=e[i])(n),!0!==c.has(p)||f.has(p)||(s.schedule(p),r(!0));o=!1},schedule:function(n,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1),z("function"==typeof n,"Argument must be a function");var i=r&&o,s=i?e:u;f.delete(n),t&&c.add(n),-1===s.indexOf(n)&&(s.push(n),i&&(a=e.length))}});return n.sync[t]=function(n,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),tn||pn(),p.schedule(n,t,r),n},n.cancelSync[t]=function(n){return p.cancel(n)},n.steps[t]=p,n},{steps:{},sync:{},cancelSync:{}}),fn=on.steps,cn=(on.sync,on.cancelSync,function(n){return fn[n].process(en)}),sn=function(n){tn=!1,en.delta=nn?Z:Math.max(Math.min(n-en.timestamp,40),1),nn||(Z=en.delta),en.timestamp=n,rn=!0,un.forEach(cn),rn=!1,tn&&(nn=!1,Y(sn))},pn=function(){tn=!0,nn=!0,rn||Y(sn)},hn=function(n){return n},dn=function(n){return void 0===n&&(n=hn),a(function(t,r,e){var u=r-e,a=-(0-t+1)*(0-n(Math.abs(u)));return u<=0?r+a:r-a})},ln=dn(),vn=dn(Math.sqrt),mn=a(function(n,t,r){var e=t-n;return((r-n)%e+e)%e+n}),gn=o(0,1),yn=function(n){return function(t){return 1-n(1-t)}},bn=function(n){return function(t){return t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2}},Mn=function(n){return function(t){return Math.pow(t,n)}},xn=function(n){return function(t){return t*t*((n+1)*t-n)}},wn=function(n){var t=xn(n);return function(n){return(n*=2)<1?.5*t(n):.5*(2-Math.pow(2,-10*(n-1)))}},On=Mn(2),An=yn(On),Fn=bn(On),In=function(n){return 1-Math.sin(Math.acos(n))},Pn=yn(In),Rn=bn(Pn),En=xn(1.525),Sn=yn(En),jn=bn(En),kn=wn(1.525),qn=8,Un=.001,$n=1e-7,zn=10,Bn=11,Dn=1/(Bn-1),Cn="undefined"!=typeof Float32Array,Nn=function(n,t){return 1-3*t+3*n},Tn=function(n,t){return 3*t-6*n},Vn=function(n){return 3*n},Wn=function(n,t,r){return 3*Nn(t,r)*n*n+2*Tn(t,r)*n+Vn(t)},_n=function(n,t,r){return((Nn(t,r)*n+Tn(t,r))*n+Vn(t))*n};n.angle=function(n,t){return void 0===t&&(t=r),u(Math.atan2(t.y-n.y,t.x-n.x))},n.applyOffset=function(n,t){var r=!0;return void 0===t&&(t=n,r=!1),function(e){return r?e-n+t:(n=e,r=!0,t)}},n.clamp=o,n.conditional=function(n,t){return function(r){return n(r)?t(r):r}},n.degreesToRadians=i,n.distance=function(n,t){if(void 0===t&&(t=r),e(n)&&e(t))return s(n,t);if(f(n)&&f(t)){var u=s(n.x,t.x),a=s(n.y,t.y),o=c(n)&&c(t)?s(n.z,t.z):0;return Math.sqrt(Math.pow(u,2)+Math.pow(a,2)+Math.pow(o,2))}return 0},n.interpolate=function(n,t,r){var e=void 0===r?{}:r,u=e.clamp,a=void 0===u||u,i=e.ease,f=e.mixer,c=n.length;z(c===t.length,"Both input and output ranges must be the same length"),z(!i||!Array.isArray(i)||i.length===c-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),n[0]>n[c-1]&&(n=[].concat(n),t=[].concat(t),n.reverse(),t.reverse());var s=G(t,i,f),h=2===c?function(n,t){var r=n[0],e=n[1],u=t[0];return function(n){return u(p(r,e,n))}}(n,s):function(n,t){var r=n.length,e=r-1;return function(u){var a=0,o=!1;if(u<=n[0]?o=!0:u>=n[e]&&(a=e-1,o=!0),!o){for(var i=1;i<r&&!(n[i]>u||i===e);i++);a=i-1}var f=p(n[a],n[a+1],u);return t[a](f)}}(n,s);return a?W(o(n[0],n[c-1]),h):h},n.isPoint=f,n.isPoint3D=c,n.mix=h,n.mixArray=_,n.mixColor=T,n.mixComplex=H,n.pipe=W,n.pointFromVector=function(n,t,r){return t=i(t),{x:r*Math.cos(t)+n.x,y:r*Math.sin(t)+n.y}},n.progress=p,n.radiansToDegrees=u,n.smooth=function(n){void 0===n&&(n=50);var t=0,r=0;return function(e){var u=en.timestamp,a=u!==r?u-r:0,o=a?Q(t,e,a,n):t;return r=u,t=o,o}},n.smoothFrame=Q,n.snap=function(n){if("number"==typeof n)return function(t){return Math.round(t/n)*n};var t=0,r=n.length;return function(e){var u=Math.abs(n[0]-e);for(t=1;t<r;t++){var a=n[t],o=Math.abs(a-e);if(0===o)return a;if(o>u)return n[t-1];if(t===r-1)return a;u=o}}},n.springForce=dn,n.springForceExpo=vn,n.springForceLinear=ln,n.steps=function(n,t){return void 0===t&&(t="end"),function(r){var e=(r="end"===t?Math.min(r,.999):Math.max(r,.001))*n,u="end"===t?Math.floor(e):Math.ceil(e);return gn(u/n)}},n.toDecimal=K,n.velocityPerFrame=function(n,t){return e(n)?n/(1e3/t):0},n.velocityPerSecond=function(n,t){return t?n*(1e3/t):0},n.wrap=mn,n.createAnticipateEasing=wn,n.createBackIn=xn,n.createExpoIn=Mn,n.cubicBezier=function(n,t,r,e){var u=Cn?new Float32Array(Bn):new Array(Bn),a=function(t){for(var e,a,o,i=0,f=1,c=Bn-1;f!==c&&u[f]<=t;++f)i+=Dn;return e=(t-u[--f])/(u[f+1]-u[f]),(o=Wn(a=i+e*Dn,n,r))>=Un?function(t,e){for(var u=0,a=0;u<qn;++u){if(0===(a=Wn(e,n,r)))return e;e-=(_n(e,n,r)-t)/a}return e}(t,a):0===o?a:function(t,e,u){var a,o,i=0;do{(a=_n(o=e+(u-e)/2,n,r)-t)>0?u=o:e=o}while(Math.abs(a)>$n&&++i<zn);return o}(t,i,i+Dn)};return function(){for(var t=0;t<Bn;++t)u[t]=_n(t*Dn,n,r)}(),function(u){return n===t&&r===e?u:0===u?0:1===u?1:_n(a(u),t,e)}},n.linear=function(n){return n},n.easeIn=On,n.easeOut=An,n.easeInOut=Fn,n.circIn=In,n.circOut=Pn,n.circInOut=Rn,n.backIn=En,n.backOut=Sn,n.backInOut=jn,n.anticipate=kn,n.reversed=yn,n.mirrored=bn,Object.defineProperty(n,"__esModule",{value:!0})});
