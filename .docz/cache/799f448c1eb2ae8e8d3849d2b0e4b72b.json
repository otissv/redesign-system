{"remainingRequest":"/mnt/Storage/Projects/themed-styled-components/node_modules/thread-loader/dist/cjs.js??ref--5-1!/mnt/Storage/Projects/themed-styled-components/node_modules/babel-loader/lib/index.js??ref--5-2!/mnt/Storage/Projects/themed-styled-components/node_modules/source-map-loader/index.js!/mnt/Storage/Projects/themed-styled-components/src/reusable/cacheState/useCacheState.js","dependencies":[{"path":"/mnt/Storage/Projects/themed-styled-components/src/reusable/cacheState/useCacheState.js","mtime":1556550887305},{"path":"/mnt/Storage/Projects/themed-styled-components/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/Storage/Projects/themed-styled-components/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/Storage/Projects/themed-styled-components/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/mnt/Storage/Projects/themed-styled-components/node_modules/source-map-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9tbnQvU3RvcmFnZS9Qcm9qZWN0cy90aGVtZWQtc3R5bGVkLWNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSAodHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsIDogcmVxdWlyZSgncmVhY3QtaG90LWxvYWRlcicpKS5lbnRlck1vZHVsZTsKICBlbnRlck1vZHVsZSAmJiBlbnRlck1vZHVsZShtb2R1bGUpOwp9KSgpOwoKaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JzsKZXhwb3J0IGZ1bmN0aW9uIHVzZUNhY2hlU3RhdGUoa2V5LCBpbml0aWFsU3RhdGUpIHsKICB2YXIgc3RvcmFnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJ3Nlc3Npb25TdG9yYWdlJzsKCiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKGluaXRpYWxTdGF0ZSksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBzdGF0ZSA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldFN0YXRlID0gX3VzZVN0YXRlMlsxXTsKCiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIHZhciBjYWNoZWQgPSB3aW5kb3dbc3RvcmFnZV0uZ2V0SXRlbShrZXkpOwogICAgdmFyIGRhdGEgPSAhY2FjaGVkID8gY2FjaGVkIDogSlNPTi5wYXJzZShjYWNoZWQpOwogICAgc2V0SXRlbShkYXRhIHx8IGluaXRpYWxTdGF0ZSk7CiAgfSwgW10pOwoKICBmdW5jdGlvbiBzZXRJdGVtKG5ld1N0YXRlKSB7CiAgICBpZiAobmV3U3RhdGUgPT09IHN0YXRlKSByZXR1cm47CiAgICB2YXIgZGF0YSA9IEpTT04uc3RyaW5naWZ5KG5ld1N0YXRlKTsKICAgIHNldFN0YXRlKG5ld1N0YXRlKTsKICAgIHJldHVybiB3aW5kb3dbc3RvcmFnZV0uc2V0SXRlbShrZXksIGRhdGEpOwogIH0KCiAgZnVuY3Rpb24gcmVtb3ZlSXRlbSgpIHsKICAgIHNldFN0YXRlKHVuZGVmaW5lZCk7CiAgICB3aW5kb3dbc3RvcmFnZV0ucmVtb3ZlSXRlbShrZXkpOwogIH0KCiAgcmV0dXJuIHVzZU1lbW8oZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIFtzdGF0ZSwgc2V0SXRlbSwgcmVtb3ZlSXRlbV07CiAgfSwgW1tzdGF0ZSwgc2V0SXRlbSwgcmVtb3ZlSXRlbV1dKTsKfQoKaWYgKHR5cGVvZiB1c2VDYWNoZVN0YXRlICE9PSAndW5kZWZpbmVkJyAmJiB1c2VDYWNoZVN0YXRlICYmIHVzZUNhY2hlU3RhdGUgPT09IE9iamVjdCh1c2VDYWNoZVN0YXRlKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHVzZUNhY2hlU3RhdGUpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHVzZUNhY2hlU3RhdGUsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJ1c2VDYWNoZVN0YXRlIiwKICAgICAgZmlsZW5hbWU6ICJzcmMvcmV1c2FibGUvY2FjaGVTdGF0ZS91c2VDYWNoZVN0YXRlLmpzIgogICAgfQogIH0pOwp9Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9ICh0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwgOiByZXF1aXJlKCdyZWFjdC1ob3QtbG9hZGVyJykpLmRlZmF1bHQ7CgogIGlmICghcmVhY3RIb3RMb2FkZXIpIHsKICAgIHJldHVybjsKICB9CgogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKHVzZUNhY2hlU3RhdGUsICJ1c2VDYWNoZVN0YXRlIiwgIi9tbnQvU3RvcmFnZS9Qcm9qZWN0cy90aGVtZWQtc3R5bGVkLWNvbXBvbmVudHMvc3JjL3JldXNhYmxlL2NhY2hlU3RhdGUvdXNlQ2FjaGVTdGF0ZS5qcyIpOwp9KSgpOwoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgbGVhdmVNb2R1bGUgPSAodHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsIDogcmVxdWlyZSgncmVhY3QtaG90LWxvYWRlcicpKS5sZWF2ZU1vZHVsZTsKICBsZWF2ZU1vZHVsZSAmJiBsZWF2ZU1vZHVsZShtb2R1bGUpOwp9KSgpOw=="},{"version":3,"sources":["/mnt/Storage/Projects/themed-styled-components/src/reusable/cacheState/useCacheState.js"],"names":["useState","useEffect","useMemo","useCacheState","key","initialState","storage","state","setState","cached","window","getItem","data","JSON","parse","setItem","newState","stringify","removeItem","undefined"],"mappings":";;;;;;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,OAA9B,QAA6C,OAA7C;AAEA,OAAO,SAASC,aAAT,CAAuBC,GAAvB,EAA4BC,YAA5B,EAAsE;AAAA,MAA5BC,OAA4B,uEAAlB,gBAAkB;;AAAA,kBACjDN,QAAQ,CAACK,YAAD,CADyC;AAAA;AAAA,MACpEE,KADoE;AAAA,MAC7DC,QAD6D;;AAG3EP,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMQ,MAAM,GAAGC,MAAM,CAACJ,OAAD,CAAN,CAAgBK,OAAhB,CAAwBP,GAAxB,CAAf;AACA,QAAMQ,IAAI,GAAG,CAACH,MAAD,GAAUA,MAAV,GAAmBI,IAAI,CAACC,KAAL,CAAWL,MAAX,CAAhC;AAEAM,IAAAA,OAAO,CAACH,IAAI,IAAIP,YAAT,CAAP;AACD,GALQ,EAKN,EALM,CAAT;;AAOA,WAASU,OAAT,CAAiBC,QAAjB,EAA2B;AACzB,QAAIA,QAAQ,KAAKT,KAAjB,EAAwB;AACxB,QAAMK,IAAI,GAAGC,IAAI,CAACI,SAAL,CAAeD,QAAf,CAAb;AAEAR,IAAAA,QAAQ,CAACQ,QAAD,CAAR;AACA,WAAON,MAAM,CAACJ,OAAD,CAAN,CAAgBS,OAAhB,CAAwBX,GAAxB,EAA6BQ,IAA7B,CAAP;AACD;;AAED,WAASM,UAAT,GAAsB;AACpBV,IAAAA,QAAQ,CAACW,SAAD,CAAR;AACAT,IAAAA,MAAM,CAACJ,OAAD,CAAN,CAAgBY,UAAhB,CAA2Bd,GAA3B;AACD;;AAED,SAAOF,OAAO,CAAC;AAAA,WAAM,CAACK,KAAD,EAAQQ,OAAR,EAAiBG,UAAjB,CAAN;AAAA,GAAD,EAAqC,CACjD,CAACX,KAAD,EAAQQ,OAAR,EAAiBG,UAAjB,CADiD,CAArC,CAAd;AAGD;;;;;;;;;;;;;;;;;;;;;;0BA1Bef,a","sourcesContent":["import { useState, useEffect, useMemo } from 'react'\n\nexport function useCacheState(key, initialState, storage = 'sessionStorage') {\n  const [state, setState] = useState(initialState)\n\n  useEffect(() => {\n    const cached = window[storage].getItem(key)\n    const data = !cached ? cached : JSON.parse(cached)\n\n    setItem(data || initialState)\n  }, [])\n\n  function setItem(newState) {\n    if (newState === state) return\n    const data = JSON.stringify(newState)\n\n    setState(newState)\n    return window[storage].setItem(key, data)\n  }\n\n  function removeItem() {\n    setState(undefined)\n    window[storage].removeItem(key)\n  }\n\n  return useMemo(() => [state, setItem, removeItem], [\n    [state, setItem, removeItem],\n  ])\n}\n"]}]}