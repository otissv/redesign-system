{"remainingRequest":"/mnt/Storage/Projects/themed-styled-components/node_modules/thread-loader/dist/cjs.js??ref--5-1!/mnt/Storage/Projects/themed-styled-components/node_modules/babel-loader/lib/index.js??ref--5-2!/mnt/Storage/Projects/themed-styled-components/node_modules/source-map-loader/index.js!/mnt/Storage/Projects/themed-styled-components/src/MonacoEditor/MonacoEditor.js","dependencies":[{"path":"/mnt/Storage/Projects/themed-styled-components/src/MonacoEditor/MonacoEditor.js","mtime":1556719889625},{"path":"/mnt/Storage/Projects/themed-styled-components/node_modules/cache-loader/dist/cjs.js","mtime":1550658762297},{"path":"/mnt/Storage/Projects/themed-styled-components/node_modules/thread-loader/dist/cjs.js","mtime":1555245588536},{"path":"/mnt/Storage/Projects/themed-styled-components/node_modules/babel-loader/lib/index.js","mtime":1550658760833},{"path":"/mnt/Storage/Projects/themed-styled-components/node_modules/source-map-loader/index.js","mtime":1550658762472}],"contextDependencies":[],"result":["import _objectSpread from \"/mnt/Storage/Projects/themed-styled-components/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/mnt/Storage/Projects/themed-styled-components/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/mnt/Storage/Projects/themed-styled-components/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _taggedTemplateLiteral from \"/mnt/Storage/Projects/themed-styled-components/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/mnt/Storage/Projects/themed-styled-components/src/MonacoEditor/MonacoEditor.js\";\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: \", \";\\n  height: \", \";\\n  width: \", \";\\n\\n  position: relative;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  \", \"\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport * as monaco from 'monaco-editor';\nimport styled from 'styled-components';\nvar MonacoEditorStyled = styled.div(_templateObject(), function (_ref) {\n  var bordered = _ref.bordered,\n      height = _ref.height,\n      width = _ref.width;\n  return \"\\n   \".concat(bordered ? \"border: 1px solid hsla(0, 0%, 56%, 1);\" : '', \" \\n   \").concat(height ? \"height: \".concat(height) : '', \"\\n   \").concat(width ? \"width: \".concat(width) : '', \"\\n\");\n});\nvar MonacoEditorContainerStyled = styled.div(_templateObject2(), function (_ref2) {\n  var margined = _ref2.margined,\n      theme = _ref2.theme;\n  return margined ? theme.unit[5] : '';\n}, function (_ref3) {\n  var height = _ref3.height;\n  return height || '100%';\n}, function (_ref4) {\n  var width = _ref4.width;\n  return width || 'auto';\n});\nexport var MonacoEditorContainer = React.memo(function MonacoEditorContainer(_ref5) {\n  var children = _ref5.children,\n      propsRest = _objectWithoutProperties(_ref5, [\"children\"]);\n\n  var _useTheme = useTheme(),\n      _useTheme2 = _slicedToArray(_useTheme, 1),\n      theme = _useTheme2[0];\n\n  return React.createElement(MonacoEditorContainerStyled, Object.assign({\n    className: \"EditorContainer\",\n    theme: theme\n  }, propsRest, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }), children);\n});\n\nif (typeof MonacoEditorContainer !== 'undefined' && MonacoEditorContainer && MonacoEditorContainer === Object(MonacoEditorContainer) && Object.isExtensible(MonacoEditorContainer)) {\n  Object.defineProperty(MonacoEditorContainer, '__filemeta', {\n    enumerable: true,\n    configurable: true,\n    value: {\n      name: \"MonacoEditorContainer\",\n      filename: \"src/MonacoEditor/MonacoEditor.js\"\n    }\n  });\n}\n\nfunction getElementDimensions() {\n  return function (el) {\n    var computed = window.getComputedStyle(el, null);\n    var rect = el.getBoundingClientRect();\n    var documentElement = document.documentElement;\n\n    var convertPxToNumber = function convertPxToNumber(px) {\n      return parseInt(px.replace('px', ''), 10);\n    };\n\n    return {\n      margin: {\n        top: convertPxToNumber(computed.getPropertyValue('margin-top')),\n        left: convertPxToNumber(computed.getPropertyValue('margin-left')),\n        bottom: convertPxToNumber(computed.getPropertyValue('margin-bottom')),\n        right: convertPxToNumber(computed.getPropertyValue('margin-right'))\n      },\n      padding: {\n        top: convertPxToNumber(computed.getPropertyValue('padding-top')),\n        left: convertPxToNumber(computed.getPropertyValue('padding-left')),\n        bottom: convertPxToNumber(computed.getPropertyValue('padding-bottom')),\n        right: convertPxToNumber(computed.getPropertyValue('padding-right'))\n      },\n      position: {\n        left: rect.left + (window.pageXOffset || documentElement.scrollLeft || 0),\n        top: rect.top + (window.pageYOffset || documentElement.scrollTop || 0)\n      },\n      offset: {\n        height: el.offsetHeight,\n        width: el.offsetWidth\n      }\n    };\n  };\n}\n\nfunction useSetEditorSize() {\n  var _useSidebar = useSidebar(),\n      sidebarWidth = _useSidebar.width;\n\n  return function (editor) {\n    var elementDimensions = getElementDimensions();\n    var el = document.querySelector('.EditorContainer');\n\n    var _elementDimensions = elementDimensions(el),\n        margin = _elementDimensions.margin,\n        offset = _elementDimensions.offset,\n        padding = _elementDimensions.padding,\n        position = _elementDimensions.position;\n\n    var windowSize = {\n      width: window.innerWidth,\n      height: window.innerHeight\n    };\n    var newSize = {\n      width: windowSize.width - padding.left - margin.left - position.left,\n      height: offset.height - padding.top - padding.bottom //TODO: exit if el size === new size\n\n    };\n    editor.current.layout(newSize);\n  };\n}\n\nexport var MonacoEditor = React.memo(function MonacoEditor(_ref6) {\n  var className = _ref6.className,\n      extend = _ref6.extend,\n      height = _ref6.height,\n      language = _ref6.language,\n      options = _ref6.options,\n      theme = _ref6.theme,\n      value = _ref6.value,\n      width = _ref6.width,\n      onChange = _ref6.onChange,\n      schema = _ref6.schema,\n      propsRest = _objectWithoutProperties(_ref6, [\"className\", \"extend\", \"height\", \"language\", \"options\", \"theme\", \"value\", \"width\", \"onChange\", \"schema\"]);\n\n  var editorRef = useRef(null);\n  var editor = useRef(null);\n  var setEditorSize = useSetEditorSize();\n  var valueRef = useRef('');\n  useEffect(function () {\n    extend && extend(monaco);\n    var model = monaco.editor.createModel(value, language);\n    editor.current = monaco.editor.create(editorRef.current, _objectSpread({\n      automaticLayout: true\n    }, options));\n    monaco.editor.setTheme('vs-dark');\n    editor.current.setModel(model);\n  }, []);\n  useEffect(function () {\n    var model = editor.current.getModel();\n    model.pushEditOperations([], [{\n      range: model.getFullModelRange(),\n      text: value\n    }]);\n  }, [value]);\n  useEffect(function () {\n    editor.current.onDidChangeModelContent(function (event) {\n      var editorValue = editor.current.getValue();\n\n      if (valueRef.current !== editorValue) {\n        onChange && onChange(editorValue, event);\n        valueRef.current = editorValue;\n      }\n    });\n    setEditorSize(editor);\n  });\n  useEffect(function () {\n    window.addEventListener('resize', setEditorSize(editor));\n    setEditorSize(editor);\n    return function () {\n      window.removeEventListener('resize', setEditorSize(editor), false);\n    };\n  });\n  useEffect(function () {\n    theme && monaco.editor.setTheme(theme);\n  }, [theme]);\n\n  function handleChange() {}\n\n  return React.createElement(MonacoEditorStyled, Object.assign({\n    className: \"react-monaco-editor-container \".concat(className || ''),\n    ref: editorRef\n  }, propsRest, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }));\n});\n\nif (typeof MonacoEditor !== 'undefined' && MonacoEditor && MonacoEditor === Object(MonacoEditor) && Object.isExtensible(MonacoEditor)) {\n  Object.defineProperty(MonacoEditor, '__filemeta', {\n    enumerable: true,\n    configurable: true,\n    value: {\n      name: \"MonacoEditor\",\n      filename: \"src/MonacoEditor/MonacoEditor.js\"\n    }\n  });\n}\n\nMonacoEditor.propTypes = {\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  value: PropTypes.string,\n  language: PropTypes.string,\n  theme: PropTypes.string,\n  options: PropTypes.object,\n  extend: PropTypes.func,\n  onChange: PropTypes.func,\n  bordered: PropTypes.bool\n};\nMonacoEditor.defaultProps = {\n  width: '100%',\n  height: '100%',\n  value: null,\n  language: 'javascript',\n  theme: null,\n  options: {}\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(MonacoEditorStyled, \"MonacoEditorStyled\", \"/mnt/Storage/Projects/themed-styled-components/src/MonacoEditor/MonacoEditor.js\");\n  reactHotLoader.register(MonacoEditorContainerStyled, \"MonacoEditorContainerStyled\", \"/mnt/Storage/Projects/themed-styled-components/src/MonacoEditor/MonacoEditor.js\");\n  reactHotLoader.register(MonacoEditorContainer, \"MonacoEditorContainer\", \"/mnt/Storage/Projects/themed-styled-components/src/MonacoEditor/MonacoEditor.js\");\n  reactHotLoader.register(getElementDimensions, \"getElementDimensions\", \"/mnt/Storage/Projects/themed-styled-components/src/MonacoEditor/MonacoEditor.js\");\n  reactHotLoader.register(useSetEditorSize, \"useSetEditorSize\", \"/mnt/Storage/Projects/themed-styled-components/src/MonacoEditor/MonacoEditor.js\");\n  reactHotLoader.register(MonacoEditor, \"MonacoEditor\", \"/mnt/Storage/Projects/themed-styled-components/src/MonacoEditor/MonacoEditor.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();",{"version":3,"sources":["/mnt/Storage/Projects/themed-styled-components/src/MonacoEditor/MonacoEditor.js"],"names":["React","useEffect","useRef","PropTypes","monaco","styled","MonacoEditorStyled","div","bordered","height","width","MonacoEditorContainerStyled","margined","theme","unit","MonacoEditorContainer","memo","children","propsRest","useTheme","getElementDimensions","el","computed","window","getComputedStyle","rect","getBoundingClientRect","documentElement","document","convertPxToNumber","px","parseInt","replace","margin","top","getPropertyValue","left","bottom","right","padding","position","pageXOffset","scrollLeft","pageYOffset","scrollTop","offset","offsetHeight","offsetWidth","useSetEditorSize","useSidebar","sidebarWidth","editor","elementDimensions","querySelector","windowSize","innerWidth","innerHeight","newSize","current","layout","MonacoEditor","className","extend","language","options","value","onChange","schema","editorRef","setEditorSize","valueRef","model","createModel","create","automaticLayout","setTheme","setModel","getModel","pushEditOperations","range","getFullModelRange","text","onDidChangeModelContent","event","editorValue","getValue","addEventListener","removeEventListener","handleChange","propTypes","oneOfType","string","number","object","func","bool","defaultProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport * as monaco from 'monaco-editor'\nimport styled from 'styled-components'\n\nconst MonacoEditorStyled = styled.div`\n  ${({ bordered, height, width }) => `\n   ${bordered ? `border: 1px solid hsla(0, 0%, 56%, 1);` : ''} \n   ${height ? `height: ${height}` : ''}\n   ${width ? `width: ${width}` : ''}\n`}\n`\n\nconst MonacoEditorContainerStyled = styled.div`\n  margin: ${({ margined, theme }) => (margined ? theme.unit[5] : '')};\n  height: ${({ height }) => height || '100%'};\n  width: ${({ width }) => width || 'auto'};\n\n  position: relative;\n`\n\nexport const MonacoEditorContainer = React.memo(function MonacoEditorContainer({\n  children,\n  ...propsRest\n}) {\n  const [theme] = useTheme()\n\n  return (\n    <MonacoEditorContainerStyled\n      className=\"EditorContainer\"\n      theme={theme}\n      {...propsRest}>\n      {children}\n    </MonacoEditorContainerStyled>\n  )\n})\n\nfunction getElementDimensions() {\n  return el => {\n    const computed = window.getComputedStyle(el, null)\n    const rect = el.getBoundingClientRect()\n    const documentElement = document.documentElement\n\n    const convertPxToNumber = px => parseInt(px.replace('px', ''), 10)\n    return {\n      margin: {\n        top: convertPxToNumber(computed.getPropertyValue('margin-top')),\n        left: convertPxToNumber(computed.getPropertyValue('margin-left')),\n        bottom: convertPxToNumber(computed.getPropertyValue('margin-bottom')),\n        right: convertPxToNumber(computed.getPropertyValue('margin-right')),\n      },\n      padding: {\n        top: convertPxToNumber(computed.getPropertyValue('padding-top')),\n        left: convertPxToNumber(computed.getPropertyValue('padding-left')),\n        bottom: convertPxToNumber(computed.getPropertyValue('padding-bottom')),\n        right: convertPxToNumber(computed.getPropertyValue('padding-right')),\n      },\n      position: {\n        left:\n          rect.left + (window.pageXOffset || documentElement.scrollLeft || 0),\n        top: rect.top + (window.pageYOffset || documentElement.scrollTop || 0),\n      },\n      offset: {\n        height: el.offsetHeight,\n        width: el.offsetWidth,\n      },\n    }\n  }\n}\n\nfunction useSetEditorSize() {\n  const { width: sidebarWidth } = useSidebar()\n\n  return editor => {\n    const elementDimensions = getElementDimensions()\n\n    const el = document.querySelector('.EditorContainer')\n    const { margin, offset, padding, position } = elementDimensions(el)\n\n    const windowSize = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n    }\n\n    const newSize = {\n      width: windowSize.width - padding.left - margin.left - position.left,\n      height: offset.height - padding.top - padding.bottom,\n    }\n\n    //TODO: exit if el size === new size\n\n    editor.current.layout(newSize)\n  }\n}\n\nexport const MonacoEditor = React.memo(function MonacoEditor({\n  className,\n  extend,\n  height,\n  language,\n  options,\n  theme,\n  value,\n  width,\n  onChange,\n  schema,\n  ...propsRest\n}) {\n  const editorRef = useRef(null)\n  const editor = useRef(null)\n  const setEditorSize = useSetEditorSize()\n  const valueRef = useRef('')\n\n  useEffect(() => {\n    extend && extend(monaco)\n    const model = monaco.editor.createModel(value, language)\n    editor.current = monaco.editor.create(editorRef.current, {\n      automaticLayout: true,\n      ...options,\n    })\n    monaco.editor.setTheme('vs-dark')\n\n    editor.current.setModel(model)\n  }, [])\n\n  useEffect(() => {\n    const model = editor.current.getModel()\n    model.pushEditOperations(\n      [],\n      [\n        {\n          range: model.getFullModelRange(),\n          text: value,\n        },\n      ]\n    )\n  }, [value])\n\n  useEffect(() => {\n    editor.current.onDidChangeModelContent(event => {\n      const editorValue = editor.current.getValue()\n      if (valueRef.current !== editorValue) {\n        onChange && onChange(editorValue, event)\n        valueRef.current = editorValue\n      }\n    })\n\n    setEditorSize(editor)\n  })\n\n  useEffect(() => {\n    window.addEventListener('resize', setEditorSize(editor))\n    setEditorSize(editor)\n\n    return () => {\n      window.removeEventListener('resize', setEditorSize(editor), false)\n    }\n  })\n\n  useEffect(() => {\n    theme && monaco.editor.setTheme(theme)\n  }, [theme])\n\n  function handleChange() {}\n\n  return (\n    <MonacoEditorStyled\n      className={`react-monaco-editor-container ${className || ''}`}\n      ref={editorRef}\n      {...propsRest}\n    />\n  )\n})\n\nMonacoEditor.propTypes = {\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  value: PropTypes.string,\n  language: PropTypes.string,\n  theme: PropTypes.string,\n  options: PropTypes.object,\n  extend: PropTypes.func,\n  onChange: PropTypes.func,\n  bordered: PropTypes.bool,\n}\n\nMonacoEditor.defaultProps = {\n  width: '100%',\n  height: '100%',\n  value: null,\n  language: 'javascript',\n  theme: null,\n  options: {},\n}\n"]}]}