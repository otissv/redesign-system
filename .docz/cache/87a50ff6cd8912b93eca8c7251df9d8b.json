{"remainingRequest":"/mnt/Storage/Projects/redesign/node_modules/thread-loader/dist/cjs.js??ref--11-1!/mnt/Storage/Projects/redesign/node_modules/docz-core/node_modules/babel-loader/lib/index.js??ref--11-2!/mnt/Storage/Projects/redesign/node_modules/source-map-loader/index.js!/mnt/Storage/Projects/redesign/src/reusable/form/useForm.ts","dependencies":[{"path":"/mnt/Storage/Projects/redesign/src/reusable/form/useForm.ts","mtime":1561663511707},{"path":"/mnt/Storage/Projects/redesign/node_modules/cache-loader/dist/cjs.js","mtime":1558371898492},{"path":"/mnt/Storage/Projects/redesign/node_modules/thread-loader/dist/cjs.js","mtime":1555245588536},{"path":"/mnt/Storage/Projects/redesign/node_modules/docz-core/node_modules/babel-loader/lib/index.js","mtime":1558369220865},{"path":"/mnt/Storage/Projects/redesign/node_modules/source-map-loader/index.js","mtime":1550658762472}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvbW50L1N0b3JhZ2UvUHJvamVjdHMvcmVkZXNpZ24vbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tICIvbW50L1N0b3JhZ2UvUHJvamVjdHMvcmVkZXNpZ24vbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvbW50L1N0b3JhZ2UvUHJvamVjdHMvcmVkZXNpZ24vbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9tbnQvU3RvcmFnZS9Qcm9qZWN0cy9yZWRlc2lnbi9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9tbnQvU3RvcmFnZS9Qcm9qZWN0cy9yZWRlc2lnbi9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkIjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGVudGVyTW9kdWxlID0gKHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbCA6IHJlcXVpcmUoJ3JlYWN0LWhvdC1sb2FkZXInKSkuZW50ZXJNb2R1bGU7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsWyJkZWZhdWx0Il0uc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VNZW1vLCB1c2VSZWR1Y2VyLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7CmltcG9ydCBjdWlkIGZyb20gJ2N1aWQnOwppbXBvcnQgeyB1c2VOb3RFcXVhbEVmZmVjdCB9IGZyb20gJy4uL3VzZU5vdEVxdWFsRWZmZWN0JzsKaW1wb3J0IGlzRW1wdHkgZnJvbSAnbG9kYXNoL2lzRW1wdHknOwoKLy9UT0RPOiBhZGQgaGlkZSBib29sZWFuIC8gZnVuY3Rpb24KdmFyIG1vZGVsRGVmYXVsdHMgPSBmdW5jdGlvbiBtb2RlbERlZmF1bHRzKCkgewogIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSwKICAgICAgaWQgPSBfcmVmLmlkLAogICAgICBpc1ZhbGlkID0gX3JlZi5pc1ZhbGlkLAogICAgICBwYXJlbnQgPSBfcmVmLnBhcmVudCwKICAgICAgdG91Y2hlZCA9IF9yZWYudG91Y2hlZDsKCiAgcmV0dXJuIHsKICAgIGRpcnR5OiB0b3VjaGVkIHx8IGZhbHNlLAogICAgaWQ6IGlkIHx8IGN1aWQoKSwKICAgIGlzVmFsaWQ6IGlzVmFsaWQgfHwgdHJ1ZSwKICAgIHBhcmVudDogcGFyZW50ICYmIHBhcmVudC5pZCwKICAgIHRvdWNoZWQ6IHRvdWNoZWQgfHwgZmFsc2UKICB9Owp9OwoKZXhwb3J0IGZ1bmN0aW9uIHVzZUZvcm0oX3JlZjIpIHsKICB2YXIgX3JlZjIkaW5pdGlhbFN0YXRlID0gX3JlZjIuaW5pdGlhbFN0YXRlLAogICAgICBpbml0aWFsU3RhdGUgPSBfcmVmMiRpbml0aWFsU3RhdGUgPT09IHZvaWQgMCA/IHsKICAgIGZpZWxkczogW10KICB9IDogX3JlZjIkaW5pdGlhbFN0YXRlLAogICAgICBvbkJsdXIgPSBfcmVmMi5vbkJsdXIsCiAgICAgIG9uQ2hhbmdlID0gX3JlZjIub25DaGFuZ2UsCiAgICAgIG9uU3VibWl0ID0gX3JlZjIub25TdWJtaXQ7CiAgdmFyIHJlZHVjZXIgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiByZWR1Y2VyKHN0YXRlLCBwYXlsb2FkKSB7CiAgICB2YXIgcGFyZW50ID0gcGF5bG9hZC5wYXJlbnQgPyBwYXlsb2FkLnBhcmVudC5zcGxpdCgnLScpIDogW107CiAgICByZXR1cm4gdXBkYXRlU3RhdGUoc3RhdGUsIF9vYmplY3RTcHJlYWQoe30sIHBheWxvYWQsIHsKICAgICAgcGFyZW50OiBwYXJlbnQKICAgIH0pKTsKICB9LCBbdXBkYXRlU3RhdGVdKTsKICB2YXIgaW5pdGlhbFN0YXRlUmVmID0gdXNlUmVmKCk7CgogIHZhciBtYXBJbml0aWFsU3RhdGUgPSBfb2JqZWN0U3ByZWFkKHt9LCBtb2RlbERlZmF1bHRzKCksIHsKICAgIGZpZWxkczogYnVpbGRNb2RlbCh7CiAgICAgIGZpZWxkczogaW5pdGlhbFN0YXRlLmZpZWxkcywKICAgICAgcGFyZW50OiBudWxsCiAgICB9KQogIH0pOwoKICB2YXIgX3VzZVJlZHVjZXIgPSB1c2VSZWR1Y2VyKHJlZHVjZXIsIG1hcEluaXRpYWxTdGF0ZSksCiAgICAgIF91c2VSZWR1Y2VyMiA9IF9zbGljZWRUb0FycmF5KF91c2VSZWR1Y2VyLCAyKSwKICAgICAgbW9kZWwgPSBfdXNlUmVkdWNlcjJbMF0sCiAgICAgIGRpc3BhdGNoID0gX3VzZVJlZHVjZXIyWzFdOwoKICB1c2VOb3RFcXVhbEVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBkaXNwYXRjaCh7CiAgICAgIHR5cGU6ICdGT1JNX1JFUExBQ0UnLAogICAgICBtb2RlbDogX29iamVjdFNwcmVhZCh7fSwgaW5pdGlhbFN0YXRlLCB7CiAgICAgICAgZmllbGRzOiBidWlsZE1vZGVsKHsKICAgICAgICAgIGZpZWxkczogaW5pdGlhbFN0YXRlLmZpZWxkcywKICAgICAgICAgIHBhcmVudDogbnVsbAogICAgICAgIH0pCiAgICAgIH0pCiAgICB9KTsKICAgIGluaXRpYWxTdGF0ZVJlZi5jdXJyZW50ID0gaW5pdGlhbFN0YXRlOwogIH0sIFtpbml0aWFsU3RhdGUsIGluaXRpYWxTdGF0ZVJlZi5jdXJyZW50XSk7CgogIGZ1bmN0aW9uIGhhbmRsZUJsdXIoZSkgewogICAgdmFyIF9lJGN1cnJlbnRUYXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQsCiAgICAgICAgaWQgPSBfZSRjdXJyZW50VGFyZ2V0LmlkLAogICAgICAgIHBhcmVudCA9IF9lJGN1cnJlbnRUYXJnZXQuZGF0YXNldC5wYXJlbnQ7CiAgICB2YXIgZmllbGQgPSBnZXRGaWVsZChmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9KSh7CiAgICAgIGlkOiBpZCwKICAgICAgcGFyZW50OiBwYXJlbnQsCiAgICAgIGZpZWxkczogbW9kZWwuZmllbGRzCiAgICB9KTsKICAgIGZpZWxkLmRhdGEuYXR0cmlidXRlcyAmJiB2YWxpZGF0b3IoewogICAgICBpZDogaWQsCiAgICAgIHBhcmVudDogcGFyZW50LAogICAgICBtb2RlbDogbW9kZWwsCiAgICAgIGRpc3BhdGNoOiBkaXNwYXRjaAogICAgfSk7CiAgICBvbkJsdXIgJiYgb25CbHVyKGUsIHsKICAgICAgZmllbGQ6IGZpZWxkLAogICAgICBtb2RlbDogbW9kZWwsCiAgICAgIGRpc3BhdGNoOiBkaXNwYXRjaAogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoZSkgewogICAgdmFyIF9lJHRhcmdldCA9IGUudGFyZ2V0LAogICAgICAgIGlkID0gX2UkdGFyZ2V0LmlkLAogICAgICAgIHBhcmVudCA9IF9lJHRhcmdldC5kYXRhc2V0LnBhcmVudDsKICAgIHZhciBmaWVsZCA9IGdldEZpZWxkKGlkKTsKICAgIHZhciBkYXRhID0gewogICAgICB0ZXh0OiB7CiAgICAgICAgdmFsdWU6IGUudGFyZ2V0LnZhbHVlCiAgICAgIH0sCiAgICAgIGNoZWNrYm94OiB7CiAgICAgICAgY2hlY2tlZDogZS50YXJnZXQuY2hlY2tlZAogICAgICB9LAogICAgICByYWRpbzogewogICAgICAgIHZhbHVlOiBlLnRhcmdldC52YWx1ZQogICAgICB9CiAgICB9W2UudGFyZ2V0LnR5cGVdIHx8IHsKICAgICAgdmFsdWU6IGUudGFyZ2V0LnZhbHVlCiAgICB9OwogICAgb25DaGFuZ2UgJiYgb25DaGFuZ2UoZSwgewogICAgICBmaWVsZDogZmllbGQsCiAgICAgIG1vZGVsOiBtb2RlbCwKICAgICAgZGlzcGF0Y2g6IGRpc3BhdGNoCiAgICB9KTsKICAgIGRpc3BhdGNoKHsKICAgICAgdHlwZTogJ0ZPUk1fVVBEQVRFJywKICAgICAgYXR0cmlidXRlczogZGF0YSwKICAgICAgaWQ6IGlkLAogICAgICBwYXJlbnQ6IHBhcmVudAogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoZSkgewogICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgdmFyIGVycm9ycyA9IFtdOwoKICAgIHZhciByZWR1Y2VWYWx1ZXMgPSBmdW5jdGlvbiByZWR1Y2VWYWx1ZXMocHJldmlvdXMsIGZpZWxkKSB7CiAgICAgIHZhciBfZmllbGQkYXR0cmlidXRlcyA9IGZpZWxkLmF0dHJpYnV0ZXMsCiAgICAgICAgICBjaGVja2VkID0gX2ZpZWxkJGF0dHJpYnV0ZXMuY2hlY2tlZCwKICAgICAgICAgIG5hbWUgPSBfZmllbGQkYXR0cmlidXRlcy5uYW1lLAogICAgICAgICAgdmFsdWUgPSBfZmllbGQkYXR0cmlidXRlcy52YWx1ZSwKICAgICAgICAgIGNoaWxkcmVuID0gZmllbGQuY2hpbGRyZW4sCiAgICAgICAgICBpZCA9IGZpZWxkLmlkLAogICAgICAgICAgcGFyZW50ID0gZmllbGQucGFyZW50OwoKICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGZ1bmN0aW9uIGN1cnJlbnRWYWx1ZSgpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIGNoZWNrZWQgIT09ICd1bmRlZmluZWQnID8gY2hlY2tlZCA6IHZhbHVlOwogICAgICB9OwoKICAgICAgdmFyIGlzVmFsaWQgPSB2YWxpZGF0b3IoewogICAgICAgIGlkOiBpZCwKICAgICAgICBwYXJlbnQ6IHBhcmVudCwKICAgICAgICBtb2RlbDogbW9kZWwsCiAgICAgICAgZGlzcGF0Y2g6IGRpc3BhdGNoCiAgICAgIH0pOwoKICAgICAgaWYgKCFpc1ZhbGlkKSB7CiAgICAgICAgZXJyb3JzLnB1c2goewogICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgIGlkOiBpZAogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gbmFtZSA/IF9vYmplY3RTcHJlYWQoe30sIHByZXZpb3VzLCBfZGVmaW5lUHJvcGVydHkoe30sIG5hbWUsIGNoaWxkcmVuID8gX29iamVjdFNwcmVhZCh7fSwgcHJldmlvdXNbbmFtZV0sIGdldFZhbHVlcyhjaGlsZHJlbikpIDogY3VycmVudFZhbHVlKCkpKSA6IHByZXZpb3VzOwogICAgfTsKCiAgICB2YXIgZ2V0VmFsdWVzID0gZnVuY3Rpb24gZ2V0VmFsdWVzKGZpZWxkcykgewogICAgICByZXR1cm4gZmllbGRzLnJlZHVjZShyZWR1Y2VWYWx1ZXMsIHt9KTsKICAgIH07CgogICAgdmFyIHJlc3VsdCA9IHsKICAgICAgZXJyb3JzOiBlcnJvcnMsCiAgICAgIHZhbHVlczogZ2V0VmFsdWVzKG1vZGVsLmZpZWxkcykKICAgIH07CiAgICBvblN1Ym1pdChyZXN1bHQsIG1vZGVsKTsKICB9CgogIHJldHVybiB1c2VNZW1vKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpc3BhdGNoOiBkaXNwYXRjaCwKICAgICAgbW9kZWw6IG1vZGVsLAogICAgICBoYW5kbGVDaGFuZ2U6IGhhbmRsZUNoYW5nZSwKICAgICAgaGFuZGxlQmx1cjogaGFuZGxlQmx1ciwKICAgICAgaGFuZGxlU3VibWl0OiBoYW5kbGVTdWJtaXQKICAgIH07CiAgfSwgW2Rpc3BhdGNoLCBtb2RlbCwgaGFuZGxlQ2hhbmdlLCBoYW5kbGVCbHVyLCBoYW5kbGVTdWJtaXRdKTsKfQoKX19zaWduYXR1cmVfXyh1c2VGb3JtLCAidXNlQ2FsbGJhY2t7cmVkdWNlcn1cbnVzZVJlZntpbml0aWFsU3RhdGVSZWZ9XG51c2VSZWR1Y2Vye1ttb2RlbCwgZGlzcGF0Y2hdKG1hcEluaXRpYWxTdGF0ZSl9XG51c2VOb3RFcXVhbEVmZmVjdHt9XG51c2VNZW1ve30iLCBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIFt1c2VOb3RFcXVhbEVmZmVjdF07Cn0pOwoKaWYgKHR5cGVvZiB1c2VGb3JtICE9PSAndW5kZWZpbmVkJyAmJiB1c2VGb3JtICYmIHVzZUZvcm0gPT09IE9iamVjdCh1c2VGb3JtKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHVzZUZvcm0pKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHVzZUZvcm0sICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJ1c2VGb3JtIiwKICAgICAgZmlsZW5hbWU6ICJzcmMvcmV1c2FibGUvZm9ybS91c2VGb3JtLnRzIgogICAgfQogIH0pOwp9CgpleHBvcnQgZnVuY3Rpb24gYnVpbGRNb2RlbChfcmVmMykgewogIHZhciBmaWVsZHMgPSBfcmVmMy5maWVsZHMsCiAgICAgIHBhcmVudCA9IF9yZWYzLnBhcmVudDsKICByZXR1cm4gZmllbGRzLm1hcChmdW5jdGlvbiAoZmllbGQpIHsKICAgIHZhciBhdHRyaWJ1dGVzID0gZmllbGQuYXR0cmlidXRlcywKICAgICAgICBpZCA9IGZpZWxkLmlkLAogICAgICAgIGlzVmFsaWQgPSBmaWVsZC5pc1ZhbGlkLAogICAgICAgIG5hbWUgPSBmaWVsZC5uYW1lLAogICAgICAgIHRvdWNoZWQgPSBmaWVsZC50b3VjaGVkOwoKICAgIHZhciBvYmogPSBfb2JqZWN0U3ByZWFkKHt9LCBmaWVsZCwgewogICAgICBhdHRyaWJ1dGVzOiBfb2JqZWN0U3ByZWFkKHt9LCBhdHRyaWJ1dGVzLCB7CiAgICAgICAgbmFtZTogbmFtZSB8fCBhdHRyaWJ1dGVzICYmIGF0dHJpYnV0ZXMubmFtZSB8fCBwYXJlbnQubmFtZQogICAgICB9KQogICAgfSwgbW9kZWxEZWZhdWx0cyh7CiAgICAgIGlkOiBpZCwKICAgICAgaXNWYWxpZDogaXNWYWxpZCwKICAgICAgcGFyZW50OiBwYXJlbnQsCiAgICAgIHRvdWNoZWQ6IHRvdWNoZWQKICAgIH0pKTsKCiAgICByZXR1cm4gZmllbGQuY2hpbGRyZW4gPyBfb2JqZWN0U3ByZWFkKHt9LCBvYmosIHsKICAgICAgY2hpbGRyZW46IGJ1aWxkTW9kZWwoewogICAgICAgIGZpZWxkczogZmllbGQuY2hpbGRyZW4sCiAgICAgICAgcGFyZW50OiBmaWVsZAogICAgICB9KQogICAgfSkgOiBvYmo7CiAgfSk7Cn0KCmlmICh0eXBlb2YgYnVpbGRNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgJiYgYnVpbGRNb2RlbCAmJiBidWlsZE1vZGVsID09PSBPYmplY3QoYnVpbGRNb2RlbCkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShidWlsZE1vZGVsKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShidWlsZE1vZGVsLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAiYnVpbGRNb2RlbCIsCiAgICAgIGZpbGVuYW1lOiAic3JjL3JldXNhYmxlL2Zvcm0vdXNlRm9ybS50cyIKICAgIH0KICB9KTsKfQoKdmFyIGdldEZpZWxkID0gZnVuY3Rpb24gZ2V0RmllbGQoY2IpIHsKICByZXR1cm4gZnVuY3Rpb24gKF9yZWY0KSB7CiAgICB2YXIgZmllbGRzID0gX3JlZjQuZmllbGRzLAogICAgICAgIGlkID0gX3JlZjQuaWQsCiAgICAgICAgcGFyZW50ID0gX3JlZjQucGFyZW50OwogICAgdmFyIHBhcmVudEFycmF5OwoKICAgIGlmIChBcnJheS5pc0FycmF5KHBhcmVudCkpIHsKICAgICAgcGFyZW50QXJyYXkgPSBbXTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIHBhcmVudCA9PT0gJ3N0cmluZycpIHsKICAgICAgcGFyZW50QXJyYXkgPSBwYXJlbnQuc3BsaXQoJy0nKTsKICAgIH0gZWxzZSB7CiAgICAgIHBhcmVudEFycmF5ID0gW107CiAgICB9CgogICAgdmFyIHBhcmVudElkID0gcGFyZW50ICYmIHBhcmVudEFycmF5WzBdLnRyaW0oKSAhPT0gJycgJiYgcGFyZW50QXJyYXlbMF07CiAgICB2YXIgZmllbGQgPSBmaWVsZHMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiBpdGVtLmlkID09PSAocGFyZW50SWQgfHwgaWQpOwogICAgfSlbMF0gfHwge307CiAgICB2YXIgaW5kZXggPSBmaWVsZHMuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiBpdGVtLmlkID09PSAocGFyZW50SWQgfHwgaWQpOwogICAgfSk7CiAgICByZXR1cm4gZmllbGQuY2hpbGRyZW4gPyBnZXRGaWVsZChjYikoewogICAgICBmaWVsZHM6IGZpZWxkLmNoaWxkcmVuLAogICAgICBwYXJlbnQ6IHBhcmVudEFycmF5LnNwbGljZSgxLCBwYXJlbnQubGVuZ3RoKSwKICAgICAgaWQ6IGlkCiAgICB9KSA6IGNiKHsKICAgICAgZGF0YTogZmllbGQsCiAgICAgIGluZGV4OiBpbmRleAogICAgfSk7CiAgfTsKfTsKCmZ1bmN0aW9uIHVwZGF0ZVN0YXRlKF9yZWY1LCBwYXlsb2FkKSB7CiAgdmFyIGZpZWxkcyA9IF9yZWY1LmZpZWxkcywKICAgICAgc3RhdGUgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZjUsIFsiZmllbGRzIl0pOwoKICB2YXIgdHlwZSA9IHBheWxvYWQudHlwZSwKICAgICAgYXR0cmlidXRlcyA9IHBheWxvYWQuYXR0cmlidXRlcywKICAgICAgaWQgPSBwYXlsb2FkLmlkLAogICAgICBtb2RlbCA9IHBheWxvYWQubW9kZWwsCiAgICAgIHBhcmVudCA9IHBheWxvYWQucGFyZW50LAogICAgICBkYXRhUmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwYXlsb2FkLCBbInR5cGUiLCAiYXR0cmlidXRlcyIsICJpZCIsICJtb2RlbCIsICJwYXJlbnQiXSk7CgogIHN3aXRjaCAodHlwZSkgewogICAgY2FzZSAnRk9STV9SRVBMQUNFJzoKICAgICAgcmV0dXJuIG1vZGVsOwoKICAgIGNhc2UgJ0ZPUk1fVVBEQVRFJzoKICAgICAgewogICAgICAgIHZhciBwYXJlbnRJZCA9IHBhcmVudC5sZW5ndGggPiAwICYmIHBhcmVudFswXS50cmltKCkgIT09ICcnICYmIHBhcmVudFswXTsKICAgICAgICB2YXIgZmllbGQgPSBmaWVsZHMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gKHBhcmVudElkIHx8IGlkKTsKICAgICAgICB9KVswXTsKICAgICAgICB2YXIgaW5kZXggPSBmaWVsZHMuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gKHBhcmVudElkIHx8IGlkKTsKICAgICAgICB9KTsKCiAgICAgICAgdmFyIHBhcmVudERhdGEgPSBmdW5jdGlvbiBwYXJlbnREYXRhKCkgewogICAgICAgICAgdmFyIGJ1aWxkRmllbGRDaGlsZHJlbiA9IGZ1bmN0aW9uIGJ1aWxkRmllbGRDaGlsZHJlbihjaGlsZHJlbikgewogICAgICAgICAgICByZXR1cm4gY2hpbGRyZW4ubWFwKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgICAgIHZhciBjaGlsZFVwZGF0ZSA9IGNoaWxkLmlkID09PSBpZCA/IF9vYmplY3RTcHJlYWQoe30sIGRhdGFSZXN0LCB7CiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBfb2JqZWN0U3ByZWFkKHt9LCBjaGlsZC5hdHRyaWJ1dGVzLCBhdHRyaWJ1dGVzKQogICAgICAgICAgICAgIH0pIDogX29iamVjdFNwcmVhZCh7fSwgY2hpbGQuY2hpbGRyZW4gPyB7CiAgICAgICAgICAgICAgICBjaGlsZHJlbjogYnVpbGRGaWVsZENoaWxkcmVuKGNoaWxkLmNoaWxkcmVuKQogICAgICAgICAgICAgIH0gOiB7fSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIGNoaWxkLCB7CiAgICAgICAgICAgICAgICBkaXJ0eTogdHJ1ZSwKICAgICAgICAgICAgICAgIHRvdWNoZWQ6IHRydWUKICAgICAgICAgICAgICB9LCBjaGlsZFVwZGF0ZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgZmllbGQsIGRhdGFSZXN0LCB7CiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IF9vYmplY3RTcHJlYWQoe30sIGZpZWxkLmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMsIHsKICAgICAgICAgICAgICBkaXJ0eTogdHJ1ZSwKICAgICAgICAgICAgICB0b3VjaGVkOiB0cnVlCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9LCBmaWVsZC5jaGlsZHJlbiA/IHsKICAgICAgICAgICAgY2hpbGRyZW46IGJ1aWxkRmllbGRDaGlsZHJlbihmaWVsZC5jaGlsZHJlbikKICAgICAgICAgIH0gOiB7fSk7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIGZpZWxkRGF0YSA9IGZ1bmN0aW9uIGZpZWxkRGF0YSgpIHsKICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBmaWVsZCwgZGF0YVJlc3QsIHsKICAgICAgICAgICAgYXR0cmlidXRlczogX29iamVjdFNwcmVhZCh7fSwgZmllbGQuYXR0cmlidXRlcywgYXR0cmlidXRlcyksCiAgICAgICAgICAgIGRpcnR5OiB0cnVlLAogICAgICAgICAgICB0b3VjaGVkOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICB2YXIgZGF0YSA9IHBhcmVudC5sZW5ndGggPiAwID8gcGFyZW50RGF0YSgpIDogZmllbGREYXRhKCk7CgogICAgICAgIHZhciBpc1VuZGVmaW5lZCA9IGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJzsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgICAgICAgIGRpcnR5OiBpc1VuZGVmaW5lZChkYXRhUmVzdC5kaXJ0eSkgPyBzdGF0ZS5kaXJ0eSA6IHRydWUsCiAgICAgICAgICB0b3VjaGVkOiBpc1VuZGVmaW5lZChkYXRhUmVzdC50b3VjaGVkKSA/IHN0YXRlLnRvdWNoZWQgOiB0cnVlLAogICAgICAgICAgaXNWYWxpZDogaXNVbmRlZmluZWQoZGF0YVJlc3QuaXNWYWxpZCkgPyBzdGF0ZS5pc1ZhbGlkIDogZGF0YVJlc3QuaXNWYWxpZCwKICAgICAgICAgIGZpZWxkczogaW5kZXggPT09IDAgPyBbZGF0YV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShmaWVsZHMuc2xpY2UoMSwgZmllbGRzLmxlbmd0aCkpKSA6IGluZGV4ID09PSBzdGF0ZS5sZW5ndGggLSAxID8gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShmaWVsZHMuc2xpY2UoMCwgZmllbGRzLmxlbmd0aCAtIDEpKSwgW2RhdGFdKSA6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZmllbGRzLnNsaWNlKDAsIGluZGV4KSksIFtkYXRhXSwgX3RvQ29uc3VtYWJsZUFycmF5KGZpZWxkcy5zbGljZShpbmRleCArIDEsIGZpZWxkcy5sZW5ndGgpKSkKICAgICAgICB9KTsKICAgICAgfQoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBzdGF0ZTsKICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0b3IoX3JlZjYpIHsKICB2YXIgZGlzcGF0Y2ggPSBfcmVmNi5kaXNwYXRjaCwKICAgICAgaWQgPSBfcmVmNi5pZCwKICAgICAgbW9kZWwgPSBfcmVmNi5tb2RlbCwKICAgICAgcGFyZW50ID0gX3JlZjYucGFyZW50OwoKICAvL1RPRE86IGZpeCBmb3IgY2hpbGRyZW4uIE5vdCBnZXR0aW5nIGVycm9ycwogIHZhciBfZmllbGQgPSAvL2ZpZWxkIHx8CiAgZ2V0RmllbGQoZnVuY3Rpb24gKF9yZWY3KSB7CiAgICB2YXIgZGF0YSA9IF9yZWY3LmRhdGE7CiAgICByZXR1cm4gZGF0YTsKICB9KSh7CiAgICBpZDogaWQsCiAgICBwYXJlbnQ6IHBhcmVudCwKICAgIGZpZWxkczogbW9kZWwuZmllbGRzCiAgfSk7CgogIGlmICghX2ZpZWxkKSByZXR1cm4gZmFsc2U7CiAgdmFyIGlzVmFsaWQgPSBfZmllbGQuaXNWYWxpZCwKICAgICAgZmllbGRWYWxpZGF0aW9uID0gX2ZpZWxkLnZhbGlkYXRlOwoKICB2YXIgX3JlZjggPSBfZmllbGQuYXR0cmlidXRlcyB8fCB7fSwKICAgICAgX3JlZjgkdmFsdWUgPSBfcmVmOC52YWx1ZSwKICAgICAgdmFsdWUgPSBfcmVmOCR2YWx1ZSA9PT0gdm9pZCAwID8gJycgOiBfcmVmOCR2YWx1ZSwKICAgICAgX3JlZjgkcmVxdWlyZWQgPSBfcmVmOC5yZXF1aXJlZCwKICAgICAgcmVxdWlyZWQgPSBfcmVmOCRyZXF1aXJlZCA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWY4JHJlcXVpcmVkLAogICAgICBfcmVmOCRjaGVja2VkID0gX3JlZjguY2hlY2tlZCwKICAgICAgY2hlY2tlZCA9IF9yZWY4JGNoZWNrZWQgPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmOCRjaGVja2VkOwoKICB2YXIgcGF5bG9hZCA9IHsKICAgIGlkOiBpZCwKICAgIHBhcmVudDogcGFyZW50CiAgfTsKICB2YXIgaGFzQ2hlY2tlZCA9IGNoZWNrZWQgPT0gbnVsbDsKICB2YXIgaGFzVmFsdWUgPSB2YWx1ZSB8fCB2YWx1ZS50cmltKCkgIT09ICcnOwogIHZhciBub3RWYWxpZCA9IHJlcXVpcmVkICYmIGhhc0NoZWNrZWQgJiYgIWhhc1ZhbHVlIHx8IGZpZWxkVmFsaWRhdGlvbiAmJiBmaWVsZFZhbGlkYXRpb24oX2ZpZWxkLCBtb2RlbCwgZGlzcGF0Y2gpOwoKICBpZiAoIW5vdFZhbGlkICE9PSBpc1ZhbGlkICYmICFpc0VtcHR5KF9maWVsZCkpIHsKICAgIGRpc3BhdGNoKF9vYmplY3RTcHJlYWQoewogICAgICB0eXBlOiAnRk9STV9VUERBVEUnCiAgICB9LCBwYXlsb2FkLCB7CiAgICAgIGlzVmFsaWQ6ICFub3RWYWxpZAogICAgfSkpOwogIH0KCiAgcmV0dXJuICFub3RWYWxpZDsKfQoKaWYgKHR5cGVvZiB2YWxpZGF0b3IgIT09ICd1bmRlZmluZWQnICYmIHZhbGlkYXRvciAmJiB2YWxpZGF0b3IgPT09IE9iamVjdCh2YWxpZGF0b3IpICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsaWRhdG9yKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2YWxpZGF0b3IsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJ2YWxpZGF0b3IiLAogICAgICBmaWxlbmFtZTogInNyYy9yZXVzYWJsZS9mb3JtL3VzZUZvcm0udHMiCiAgICB9CiAgfSk7Cn0KCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIHJlYWN0SG90TG9hZGVyID0gKHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbCA6IHJlcXVpcmUoJ3JlYWN0LWhvdC1sb2FkZXInKSkuZGVmYXVsdDsKCiAgaWYgKCFyZWFjdEhvdExvYWRlcikgewogICAgcmV0dXJuOwogIH0KCiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIobW9kZWxEZWZhdWx0cywgIm1vZGVsRGVmYXVsdHMiLCAiL21udC9TdG9yYWdlL1Byb2plY3RzL3JlZGVzaWduL3NyYy9yZXVzYWJsZS9mb3JtL3VzZUZvcm0udHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3Rlcih1c2VGb3JtLCAidXNlRm9ybSIsICIvbW50L1N0b3JhZ2UvUHJvamVjdHMvcmVkZXNpZ24vc3JjL3JldXNhYmxlL2Zvcm0vdXNlRm9ybS50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGJ1aWxkTW9kZWwsICJidWlsZE1vZGVsIiwgIi9tbnQvU3RvcmFnZS9Qcm9qZWN0cy9yZWRlc2lnbi9zcmMvcmV1c2FibGUvZm9ybS91c2VGb3JtLnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoZ2V0RmllbGQsICJnZXRGaWVsZCIsICIvbW50L1N0b3JhZ2UvUHJvamVjdHMvcmVkZXNpZ24vc3JjL3JldXNhYmxlL2Zvcm0vdXNlRm9ybS50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKHVwZGF0ZVN0YXRlLCAidXBkYXRlU3RhdGUiLCAiL21udC9TdG9yYWdlL1Byb2plY3RzL3JlZGVzaWduL3NyYy9yZXVzYWJsZS9mb3JtL3VzZUZvcm0udHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3Rlcih2YWxpZGF0b3IsICJ2YWxpZGF0b3IiLCAiL21udC9TdG9yYWdlL1Byb2plY3RzL3JlZGVzaWduL3NyYy9yZXVzYWJsZS9mb3JtL3VzZUZvcm0udHMiKTsKfSkoKTsKCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxlYXZlTW9kdWxlID0gKHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbCA6IHJlcXVpcmUoJ3JlYWN0LWhvdC1sb2FkZXInKSkubGVhdmVNb2R1bGU7CiAgbGVhdmVNb2R1bGUgJiYgbGVhdmVNb2R1bGUobW9kdWxlKTsKfSkoKTs="},{"version":3,"sources":["/mnt/Storage/Projects/redesign/src/reusable/form/useForm.ts"],"names":["useCallback","useMemo","useReducer","useRef","cuid","useNotEqualEffect","isEmpty","modelDefaults","id","isValid","parent","touched","dirty","useForm","initialState","fields","onBlur","onChange","onSubmit","reducer","state","payload","split","updateState","initialStateRef","mapInitialState","buildModel","model","dispatch","type","current","handleBlur","e","currentTarget","dataset","field","getField","result","data","attributes","validator","handleChange","target","text","value","checkbox","checked","radio","handleSubmit","preventDefault","errors","reduceValues","previous","name","children","currentValue","push","getValues","reduce","values","map","obj","cb","parentArray","Array","isArray","parentId","trim","filter","item","index","findIndex","splice","length","dataRest","parentData","buildFieldChildren","child","childUpdate","fieldData","isUndefined","slice","_field","fieldValidation","validate","required","hasChecked","hasValue","notValid"],"mappings":";;;;;;;;;;;;;;;AAAA,SAASA,WAAT,EAAsBC,OAAtB,EAA+BC,UAA/B,EAA2CC,MAA3C,QAAyD,OAAzD;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,SAASC,iBAAT,QAAkC,sBAAlC;AACA,OAAOC,OAAP,MAAoB,gBAApB;;AAGA;AAEA,IAAMC,aAAoC,GAAG,SAASA,aAAT,GAKrC;AAAA,iFAAJ,EAAI;AAAA,MAJNC,EAIM,QAJNA,EAIM;AAAA,MAHNC,OAGM,QAHNA,OAGM;AAAA,MAFNC,MAEM,QAFNA,MAEM;AAAA,MADNC,OACM,QADNA,OACM;;AACN,SAAO;AACLC,IAAAA,KAAK,EAAED,OAAO,IAAI,KADb;AAELH,IAAAA,EAAE,EAAEA,EAAE,IAAIJ,IAAI,EAFT;AAGLK,IAAAA,OAAO,EAAEA,OAAO,IAAI,IAHf;AAILC,IAAAA,MAAM,EAAEA,MAAM,IAAIA,MAAM,CAACF,EAJpB;AAKLG,IAAAA,OAAO,EAAEA,OAAO,IAAI;AALf,GAAP;AAOD,CAbD;;AAeA,OAAO,SAASE,OAAT,QAKJ;AAAA,iCAJDC,YAIC;AAAA,MAJDA,YAIC,mCAJc;AAAEC,IAAAA,MAAM,EAAE;AAAV,GAId;AAAA,MAHDC,MAGC,SAHDA,MAGC;AAAA,MAFDC,QAEC,SAFDA,QAEC;AAAA,MADDC,QACC,SADDA,QACC;AACD,MAAMC,OAAO,GAAGnB,WAAW,CACzB,SAASmB,OAAT,CAAiBC,KAAjB,EAAwBC,OAAxB,EAAiC;AAC/B,QAAMX,MAAM,GAAGW,OAAO,CAACX,MAAR,GAAiBW,OAAO,CAACX,MAAR,CAAeY,KAAf,CAAqB,GAArB,CAAjB,GAA6C,EAA5D;AACA,WAAOC,WAAW,CAACH,KAAD,oBAAaC,OAAb;AAAsBX,MAAAA,MAAM,EAANA;AAAtB,OAAlB;AACD,GAJwB,EAKzB,CAACa,WAAD,CALyB,CAA3B;AAQA,MAAMC,eAAe,GAAGrB,MAAM,EAA9B;;AAEA,MAAMsB,eAAe,qBAChBlB,aAAa,EADG;AAEnBQ,IAAAA,MAAM,EAAEW,UAAU,CAAC;AACjBX,MAAAA,MAAM,EAAED,YAAY,CAACC,MADJ;AAEjBL,MAAAA,MAAM,EAAE;AAFS,KAAD;AAFC,IAArB;;AAXC,oBAmByBR,UAAU,CAACiB,OAAD,EAAUM,eAAV,CAnBnC;AAAA;AAAA,MAmBME,KAnBN;AAAA,MAmBaC,QAnBb;;AAqBDvB,EAAAA,iBAAiB,CAAC,YAAM;AACtBuB,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAE,cADC;AAEPF,MAAAA,KAAK,oBACAb,YADA;AAEHC,QAAAA,MAAM,EAAEW,UAAU,CAAC;AACjBX,UAAAA,MAAM,EAAED,YAAY,CAACC,MADJ;AAEjBL,UAAAA,MAAM,EAAE;AAFS,SAAD;AAFf;AAFE,KAAD,CAAR;AAUAc,IAAAA,eAAe,CAACM,OAAhB,GAA0BhB,YAA1B;AACD,GAZgB,EAYd,CAACA,YAAD,EAAeU,eAAe,CAACM,OAA/B,CAZc,CAAjB;;AAcA,WAASC,UAAT,CAAoBC,CAApB,EAA2D;AAAA,2BAIrDA,CAAC,CAACC,aAJmD;AAAA,QAEvDzB,EAFuD,oBAEvDA,EAFuD;AAAA,QAG5CE,MAH4C,oBAGvDwB,OAHuD,CAG5CxB,MAH4C;AAMzD,QAAMyB,KAAK,GAAGC,QAAQ,CAAC,UAAAC,MAAM;AAAA,aAAIA,MAAJ;AAAA,KAAP,CAAR,CAA2B;AACvC7B,MAAAA,EAAE,EAAFA,EADuC;AAEvCE,MAAAA,MAAM,EAANA,MAFuC;AAGvCK,MAAAA,MAAM,EAAEY,KAAK,CAACZ;AAHyB,KAA3B,CAAd;AAMAoB,IAAAA,KAAK,CAACG,IAAN,CAAWC,UAAX,IAAyBC,SAAS,CAAC;AAAEhC,MAAAA,EAAE,EAAFA,EAAF;AAAME,MAAAA,MAAM,EAANA,MAAN;AAAciB,MAAAA,KAAK,EAALA,KAAd;AAAqBC,MAAAA,QAAQ,EAARA;AAArB,KAAD,CAAlC;AAEAZ,IAAAA,MAAM,IAAIA,MAAM,CAACgB,CAAD,EAAI;AAAEG,MAAAA,KAAK,EAALA,KAAF;AAASR,MAAAA,KAAK,EAALA,KAAT;AAAgBC,MAAAA,QAAQ,EAARA;AAAhB,KAAJ,CAAhB;AACD;;AAED,WAASa,YAAT,CAAsBT,CAAtB,EAA8D;AAAA,oBAIxDA,CAAC,CAACU,MAJsD;AAAA,QAE1DlC,EAF0D,aAE1DA,EAF0D;AAAA,QAG/CE,MAH+C,aAG1DwB,OAH0D,CAG/CxB,MAH+C;AAK5D,QAAMyB,KAAK,GAAGC,QAAQ,CAAC5B,EAAD,CAAtB;AAEA,QAAM8B,IAAI,GAAG;AACXK,MAAAA,IAAI,EAAE;AACJC,QAAAA,KAAK,EAAEZ,CAAC,CAACU,MAAF,CAASE;AADZ,OADK;AAIXC,MAAAA,QAAQ,EAAE;AACRC,QAAAA,OAAO,EAAEd,CAAC,CAACU,MAAF,CAASI;AADV,OAJC;AAOXC,MAAAA,KAAK,EAAE;AACLH,QAAAA,KAAK,EAAEZ,CAAC,CAACU,MAAF,CAASE;AADX;AAPI,MAUXZ,CAAC,CAACU,MAAF,CAASb,IAVE,KAUO;AAAEe,MAAAA,KAAK,EAAEZ,CAAC,CAACU,MAAF,CAASE;AAAlB,KAVpB;AAYA3B,IAAAA,QAAQ,IAAIA,QAAQ,CAACe,CAAD,EAAI;AAAEG,MAAAA,KAAK,EAALA,KAAF;AAASR,MAAAA,KAAK,EAALA,KAAT;AAAgBC,MAAAA,QAAQ,EAARA;AAAhB,KAAJ,CAApB;AAEAA,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAE,aADC;AAEPU,MAAAA,UAAU,EAAED,IAFL;AAGP9B,MAAAA,EAAE,EAAFA,EAHO;AAIPE,MAAAA,MAAM,EAANA;AAJO,KAAD,CAAR;AAMD;;AAED,WAASsC,YAAT,CAAsBhB,CAAtB,EAAwD;AACtDA,IAAAA,CAAC,CAACiB,cAAF;AACA,QAAIC,MAAM,GAAG,EAAb;;AAEA,QAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,QAAD,EAAWjB,KAAX,EAAqB;AAAA,8BAMpCA,KANoC,CAEtCI,UAFsC;AAAA,UAExBO,OAFwB,qBAExBA,OAFwB;AAAA,UAEfO,IAFe,qBAEfA,IAFe;AAAA,UAETT,KAFS,qBAETA,KAFS;AAAA,UAGtCU,QAHsC,GAMpCnB,KANoC,CAGtCmB,QAHsC;AAAA,UAItC9C,EAJsC,GAMpC2B,KANoC,CAItC3B,EAJsC;AAAA,UAKtCE,MALsC,GAMpCyB,KANoC,CAKtCzB,MALsC;;AAOxC,UAAM6C,YAAY,GAAG,SAAfA,YAAe;AAAA,eACnB,OAAOT,OAAP,KAAmB,WAAnB,GAAiCA,OAAjC,GAA2CF,KADxB;AAAA,OAArB;;AAGA,UAAMnC,OAAO,GAAG+B,SAAS,CAAC;AACxBhC,QAAAA,EAAE,EAAFA,EADwB;AAExBE,QAAAA,MAAM,EAANA,MAFwB;AAGxBiB,QAAAA,KAAK,EAALA,KAHwB;AAIxBC,QAAAA,QAAQ,EAARA;AAJwB,OAAD,CAAzB;;AAOA,UAAI,CAACnB,OAAL,EAAc;AACZyC,QAAAA,MAAM,CAACM,IAAP,CAAY;AAAEH,UAAAA,IAAI,EAAJA,IAAF;AAAQ7C,UAAAA,EAAE,EAAFA;AAAR,SAAZ;AACD;;AAED,aAAO6C,IAAI,qBAEFD,QAFE,sBAGJC,IAHI,EAGGC,QAAQ,qBACPF,QAAQ,CAACC,IAAD,CADD,EACYI,SAAS,CAACH,QAAD,CADrB,IAEZC,YAAY,EALX,KAOPH,QAPJ;AAQD,KA7BD;;AA+BA,QAAMK,SAAS,GAAG,SAAZA,SAAY,CAAA1C,MAAM,EAAI;AAC1B,aAAOA,MAAM,CAAC2C,MAAP,CAAcP,YAAd,EAA4B,EAA5B,CAAP;AACD,KAFD;;AAIA,QAAMd,MAAM,GAAG;AACba,MAAAA,MAAM,EAANA,MADa;AAEbS,MAAAA,MAAM,EAAEF,SAAS,CAAC9B,KAAK,CAACZ,MAAP;AAFJ,KAAf;AAKAG,IAAAA,QAAQ,CAACmB,MAAD,EAASV,KAAT,CAAR;AACD;;AAED,SAAO1B,OAAO,CACZ;AAAA,WAAO;AAAE2B,MAAAA,QAAQ,EAARA,QAAF;AAAYD,MAAAA,KAAK,EAALA,KAAZ;AAAmBc,MAAAA,YAAY,EAAZA,YAAnB;AAAiCV,MAAAA,UAAU,EAAVA,UAAjC;AAA6CiB,MAAAA,YAAY,EAAZA;AAA7C,KAAP;AAAA,GADY,EAEZ,CAACpB,QAAD,EAAWD,KAAX,EAAkBc,YAAlB,EAAgCV,UAAhC,EAA4CiB,YAA5C,CAFY,CAAd;AAID;;cAzIenC,O;UA0BdR,iB;;;;;;;;;;;;;;AAiHF,OAAO,SAASqB,UAAT,QAAwC;AAAA,MAAlBX,MAAkB,SAAlBA,MAAkB;AAAA,MAAVL,MAAU,SAAVA,MAAU;AAC7C,SAAOK,MAAM,CAAC6C,GAAP,CAAW,UAAAzB,KAAK,EAAI;AAAA,QACjBI,UADiB,GAC0BJ,KAD1B,CACjBI,UADiB;AAAA,QACL/B,EADK,GAC0B2B,KAD1B,CACL3B,EADK;AAAA,QACDC,OADC,GAC0B0B,KAD1B,CACD1B,OADC;AAAA,QACQ4C,IADR,GAC0BlB,KAD1B,CACQkB,IADR;AAAA,QACc1C,OADd,GAC0BwB,KAD1B,CACcxB,OADd;;AAGzB,QAAMkD,GAAG,qBACJ1B,KADI;AAEPI,MAAAA,UAAU,oBACLA,UADK;AAERc,QAAAA,IAAI,EAAEA,IAAI,IAAKd,UAAU,IAAIA,UAAU,CAACc,IAAlC,IAA2C3C,MAAM,CAAC2C;AAFhD;AAFH,OAMJ9C,aAAa,CAAC;AAAEC,MAAAA,EAAE,EAAFA,EAAF;AAAMC,MAAAA,OAAO,EAAPA,OAAN;AAAeC,MAAAA,MAAM,EAANA,MAAf;AAAuBC,MAAAA,OAAO,EAAPA;AAAvB,KAAD,CANT,CAAT;;AASA,WAAOwB,KAAK,CAACmB,QAAN,qBAEEO,GAFF;AAGDP,MAAAA,QAAQ,EAAE5B,UAAU,CAAC;AACnBX,QAAAA,MAAM,EAAEoB,KAAK,CAACmB,QADK;AAEnB5C,QAAAA,MAAM,EAAEyB;AAFW,OAAD;AAHnB,SAQH0B,GARJ;AASD,GArBM,CAAP;AAsBD;;;;;;;;;;;;;AAED,IAAMzB,QAAQ,GAAG,SAASA,QAAT,CAAkB0B,EAAlB,EAAsB;AACrC,SAAO,iBAA4B;AAAA,QAAzB/C,MAAyB,SAAzBA,MAAyB;AAAA,QAAjBP,EAAiB,SAAjBA,EAAiB;AAAA,QAAbE,MAAa,SAAbA,MAAa;AACjC,QAAIqD,WAAJ;;AAEA,QAAIC,KAAK,CAACC,OAAN,CAAcvD,MAAd,CAAJ,EAA2B;AACzBqD,MAAAA,WAAW,GAAG,EAAd;AACD,KAFD,MAEO,IAAI,OAAOrD,MAAP,KAAkB,QAAtB,EAAgC;AACrCqD,MAAAA,WAAW,GAAGrD,MAAM,CAACY,KAAP,CAAa,GAAb,CAAd;AACD,KAFM,MAEA;AACLyC,MAAAA,WAAW,GAAG,EAAd;AACD;;AAED,QAAMG,QAAQ,GAAGxD,MAAM,IAAIqD,WAAW,CAAC,CAAD,CAAX,CAAeI,IAAf,OAA0B,EAApC,IAA0CJ,WAAW,CAAC,CAAD,CAAtE;AACA,QAAM5B,KAAK,GAAGpB,MAAM,CAACqD,MAAP,CAAc,UAAAC,IAAI;AAAA,aAAIA,IAAI,CAAC7D,EAAL,MAAa0D,QAAQ,IAAI1D,EAAzB,CAAJ;AAAA,KAAlB,EAAoD,CAApD,KAA0D,EAAxE;AACA,QAAM8D,KAAK,GAAGvD,MAAM,CAACwD,SAAP,CAAiB,UAAAF,IAAI;AAAA,aAAIA,IAAI,CAAC7D,EAAL,MAAa0D,QAAQ,IAAI1D,EAAzB,CAAJ;AAAA,KAArB,CAAd;AAEA,WAAO2B,KAAK,CAACmB,QAAN,GACHlB,QAAQ,CAAC0B,EAAD,CAAR,CAAa;AACX/C,MAAAA,MAAM,EAAEoB,KAAK,CAACmB,QADH;AAEX5C,MAAAA,MAAM,EAAEqD,WAAW,CAACS,MAAZ,CAAmB,CAAnB,EAAsB9D,MAAM,CAAC+D,MAA7B,CAFG;AAGXjE,MAAAA,EAAE,EAAFA;AAHW,KAAb,CADG,GAMHsD,EAAE,CAAC;AAAExB,MAAAA,IAAI,EAAEH,KAAR;AAAemC,MAAAA,KAAK,EAALA;AAAf,KAAD,CANN;AAOD,GAtBD;AAuBD,CAxBD;;AA0BA,SAAS/C,WAAT,QAA2CF,OAA3C,EAAoD;AAAA,MAA7BN,MAA6B,SAA7BA,MAA6B;AAAA,MAAlBK,KAAkB;;AAAA,MAC1CS,IAD0C,GACWR,OADX,CAC1CQ,IAD0C;AAAA,MACpCU,UADoC,GACWlB,OADX,CACpCkB,UADoC;AAAA,MACxB/B,EADwB,GACWa,OADX,CACxBb,EADwB;AAAA,MACpBmB,KADoB,GACWN,OADX,CACpBM,KADoB;AAAA,MACbjB,MADa,GACWW,OADX,CACbX,MADa;AAAA,MACFgE,QADE,4BACWrD,OADX;;AAGlD,UAAQQ,IAAR;AACE,SAAK,cAAL;AACE,aAAOF,KAAP;;AACF,SAAK,aAAL;AAAoB;AAClB,YAAMuC,QAAQ,GACZxD,MAAM,CAAC+D,MAAP,GAAgB,CAAhB,IAAqB/D,MAAM,CAAC,CAAD,CAAN,CAAUyD,IAAV,OAAqB,EAA1C,IAAgDzD,MAAM,CAAC,CAAD,CADxD;AAEA,YAAMyB,KAAK,GAAGpB,MAAM,CAACqD,MAAP,CAAc,UAAAC,IAAI;AAAA,iBAAIA,IAAI,CAAC7D,EAAL,MAAa0D,QAAQ,IAAI1D,EAAzB,CAAJ;AAAA,SAAlB,EAAoD,CAApD,CAAd;AACA,YAAM8D,KAAK,GAAGvD,MAAM,CAACwD,SAAP,CAAiB,UAAAF,IAAI;AAAA,iBAAIA,IAAI,CAAC7D,EAAL,MAAa0D,QAAQ,IAAI1D,EAAzB,CAAJ;AAAA,SAArB,CAAd;;AAEA,YAAMmE,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,cAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAtB,QAAQ,EAAI;AACrC,mBAAOA,QAAQ,CAACM,GAAT,CAAa,UAAAiB,KAAK,EAAI;AAC3B,kBAAMC,WAAW,GACfD,KAAK,CAACrE,EAAN,KAAaA,EAAb,qBAESkE,QAFT;AAGMnC,gBAAAA,UAAU,oBACLsC,KAAK,CAACtC,UADD,EAELA,UAFK;AAHhB,qCASUsC,KAAK,CAACvB,QAAN,GACA;AAAEA,gBAAAA,QAAQ,EAAEsB,kBAAkB,CAACC,KAAK,CAACvB,QAAP;AAA9B,eADA,GAEA,EAXV,CADF;AAeA,uCACKuB,KADL;AAEEjE,gBAAAA,KAAK,EAAE,IAFT;AAGED,gBAAAA,OAAO,EAAE;AAHX,iBAIKmE,WAJL;AAMD,aAtBM,CAAP;AAuBD,WAxBD;;AA0BA,mCACK3C,KADL,EAEKuC,QAFL;AAGEnC,YAAAA,UAAU,oBACLJ,KAAK,CAACI,UADD,EAELA,UAFK;AAGR3B,cAAAA,KAAK,EAAE,IAHC;AAIRD,cAAAA,OAAO,EAAE;AAJD;AAHZ,aASMwB,KAAK,CAACmB,QAAN,GACA;AAAEA,YAAAA,QAAQ,EAAEsB,kBAAkB,CAACzC,KAAK,CAACmB,QAAP;AAA9B,WADA,GAEA,EAXN;AAaD,SAxCD;;AA0CA,YAAMyB,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,mCACK5C,KADL,EAEKuC,QAFL;AAGEnC,YAAAA,UAAU,oBACLJ,KAAK,CAACI,UADD,EAELA,UAFK,CAHZ;AAOE3B,YAAAA,KAAK,EAAE,IAPT;AAQED,YAAAA,OAAO,EAAE;AARX;AAUD,SAXD;;AAaA,YAAM2B,IAAI,GAAG5B,MAAM,CAAC+D,MAAP,GAAgB,CAAhB,GAAoBE,UAAU,EAA9B,GAAmCI,SAAS,EAAzD;;AAEA,YAAMC,WAAW,GAAG,SAAdA,WAAc,CAAApC,KAAK;AAAA,iBAAI,OAAOA,KAAP,KAAiB,WAArB;AAAA,SAAzB;;AAEA,iCACKxB,KADL;AAEER,UAAAA,KAAK,EAAEoE,WAAW,CAACN,QAAQ,CAAC9D,KAAV,CAAX,GAA8BQ,KAAK,CAACR,KAApC,GAA4C,IAFrD;AAGED,UAAAA,OAAO,EAAEqE,WAAW,CAACN,QAAQ,CAAC/D,OAAV,CAAX,GAAgCS,KAAK,CAACT,OAAtC,GAAgD,IAH3D;AAIEF,UAAAA,OAAO,EAAEuE,WAAW,CAACN,QAAQ,CAACjE,OAAV,CAAX,GACLW,KAAK,CAACX,OADD,GAELiE,QAAQ,CAACjE,OANf;AAOEM,UAAAA,MAAM,EACJuD,KAAK,KAAK,CAAV,IACKhC,IADL,4BACcvB,MAAM,CAACkE,KAAP,CAAa,CAAb,EAAgBlE,MAAM,CAAC0D,MAAvB,CADd,KAEIH,KAAK,KAAKlD,KAAK,CAACqD,MAAN,GAAe,CAAzB,gCACI1D,MAAM,CAACkE,KAAP,CAAa,CAAb,EAAgBlE,MAAM,CAAC0D,MAAP,GAAgB,CAAhC,CADJ,IACwCnC,IADxC,kCAGKvB,MAAM,CAACkE,KAAP,CAAa,CAAb,EAAgBX,KAAhB,CAHL,IAIEhC,IAJF,sBAKKvB,MAAM,CAACkE,KAAP,CAAaX,KAAK,GAAG,CAArB,EAAwBvD,MAAM,CAAC0D,MAA/B,CALL;AAVR;AAkBD;;AACD;AACE,aAAOrD,KAAP;AAxFJ;AA0FD;;AAED,OAAO,SAASoB,SAAT,QAAoD;AAAA,MAA/BZ,QAA+B,SAA/BA,QAA+B;AAAA,MAArBpB,EAAqB,SAArBA,EAAqB;AAAA,MAAjBmB,KAAiB,SAAjBA,KAAiB;AAAA,MAAVjB,MAAU,SAAVA,MAAU;;AACzD;AACA,MAAMwE,MAAM,GACV;AACA9C,EAAAA,QAAQ,CAAC;AAAA,QAAGE,IAAH,SAAGA,IAAH;AAAA,WAAcA,IAAd;AAAA,GAAD,CAAR,CAA6B;AAC3B9B,IAAAA,EAAE,EAAFA,EAD2B;AAE3BE,IAAAA,MAAM,EAANA,MAF2B;AAG3BK,IAAAA,MAAM,EAAEY,KAAK,CAACZ;AAHa,GAA7B,CAFF;;AAQA,MAAI,CAACmE,MAAL,EAAa,OAAO,KAAP;AAV4C,MAYjDzE,OAZiD,GAYVyE,MAZU,CAYjDzE,OAZiD;AAAA,MAY9B0E,eAZ8B,GAYVD,MAZU,CAYxCE,QAZwC;;AAAA,cAcvDF,MAAM,CAAC3C,UAAP,IAAqB,EAdkC;AAAA,0BAajDK,KAbiD;AAAA,MAajDA,KAbiD,4BAazC,EAbyC;AAAA,6BAarCyC,QAbqC;AAAA,MAarCA,QAbqC,+BAa1B,IAb0B;AAAA,4BAapBvC,OAboB;AAAA,MAapBA,OAboB,8BAaV,IAbU;;AAgBzD,MAAMzB,OAAO,GAAG;AAAEb,IAAAA,EAAE,EAAEA,EAAN;AAAUE,IAAAA,MAAM,EAANA;AAAV,GAAhB;AACA,MAAM4E,UAAU,GAAGxC,OAAO,IAAI,IAA9B;AACA,MAAMyC,QAAQ,GAAG3C,KAAK,IAAIA,KAAK,CAACuB,IAAN,OAAiB,EAA3C;AAEA,MAAMqB,QAAQ,GACXH,QAAQ,IAAIC,UAAZ,IAA0B,CAACC,QAA5B,IACCJ,eAAe,IAAIA,eAAe,CAACD,MAAD,EAASvD,KAAT,EAAgBC,QAAhB,CAFrC;;AAIA,MAAI,CAAC4D,QAAD,KAAc/E,OAAd,IAAyB,CAACH,OAAO,CAAC4E,MAAD,CAArC,EAA+C;AAC7CtD,IAAAA,QAAQ;AACNC,MAAAA,IAAI,EAAE;AADA,OAEHR,OAFG;AAGNZ,MAAAA,OAAO,EAAE,CAAC+E;AAHJ,OAAR;AAKD;;AAED,SAAO,CAACA,QAAR;AACD;;;;;;;;;;;;;;;;;;;;;;0BA7UKjF,a;0BAeUM,O;0BA2IAa,U;0BAyBVU,Q;0BA0BGb,W;0BA+FOiB,S","sourcesContent":["import { useCallback, useMemo, useReducer, useRef } from 'react';\nimport cuid from 'cuid';\nimport { useNotEqualEffect } from '../useNotEqualEffect';\nimport isEmpty from 'lodash/isEmpty';\nimport { FormModelDefaultsType } from './useForm.types';\n\n//TODO: add hide boolean / function\n\nconst modelDefaults: FormModelDefaultsType = function modelDefaults({\n  id,\n  isValid,\n  parent,\n  touched,\n} = {}) {\n  return {\n    dirty: touched || false,\n    id: id || cuid(),\n    isValid: isValid || true,\n    parent: parent && parent.id,\n    touched: touched || false,\n  };\n};\n\nexport function useForm({\n  initialState = { fields: [] },\n  onBlur,\n  onChange,\n  onSubmit,\n}) {\n  const reducer = useCallback(\n    function reducer(state, payload) {\n      const parent = payload.parent ? payload.parent.split('-') : [];\n      return updateState(state, { ...payload, parent });\n    },\n    [updateState]\n  );\n\n  const initialStateRef = useRef<{ fields: any[] }>();\n\n  const mapInitialState = {\n    ...modelDefaults(),\n    fields: buildModel({\n      fields: initialState.fields,\n      parent: null,\n    }),\n  };\n\n  const [model, dispatch] = useReducer(reducer, mapInitialState);\n\n  useNotEqualEffect(() => {\n    dispatch({\n      type: 'FORM_REPLACE',\n      model: {\n        ...initialState,\n        fields: buildModel({\n          fields: initialState.fields,\n          parent: null,\n        }),\n      },\n    });\n    initialStateRef.current = initialState;\n  }, [initialState, initialStateRef.current]);\n\n  function handleBlur(e: React.MouseEvent<HTMLInputElement>) {\n    const {\n      id,\n      dataset: { parent },\n    } = e.currentTarget;\n\n    const field = getField(result => result)({\n      id,\n      parent,\n      fields: model.fields,\n    });\n\n    field.data.attributes && validator({ id, parent, model, dispatch });\n\n    onBlur && onBlur(e, { field, model, dispatch });\n  }\n\n  function handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const {\n      id,\n      dataset: { parent },\n    } = e.target;\n    const field = getField(id);\n\n    const data = {\n      text: {\n        value: e.target.value,\n      },\n      checkbox: {\n        checked: e.target.checked,\n      },\n      radio: {\n        value: e.target.value,\n      },\n    }[e.target.type] || { value: e.target.value };\n\n    onChange && onChange(e, { field, model, dispatch });\n\n    dispatch({\n      type: 'FORM_UPDATE',\n      attributes: data,\n      id,\n      parent,\n    });\n  }\n\n  function handleSubmit(e: React.MouseEvent<HTMLElement>) {\n    e.preventDefault();\n    let errors = [];\n\n    const reduceValues = (previous, field) => {\n      const {\n        attributes: { checked, name, value },\n        children,\n        id,\n        parent,\n      } = field;\n      const currentValue = () =>\n        typeof checked !== 'undefined' ? checked : value;\n\n      const isValid = validator({\n        id,\n        parent,\n        model,\n        dispatch,\n      });\n\n      if (!isValid) {\n        errors.push({ name, id });\n      }\n\n      return name\n        ? {\n            ...previous,\n            [name]: children\n              ? { ...previous[name], ...getValues(children) }\n              : currentValue(),\n          }\n        : previous;\n    };\n\n    const getValues = fields => {\n      return fields.reduce(reduceValues, {});\n    };\n\n    const result = {\n      errors,\n      values: getValues(model.fields),\n    };\n\n    onSubmit(result, model);\n  }\n\n  return useMemo(\n    () => ({ dispatch, model, handleChange, handleBlur, handleSubmit }),\n    [dispatch, model, handleChange, handleBlur, handleSubmit]\n  );\n}\n\nexport function buildModel({ fields, parent }) {\n  return fields.map(field => {\n    const { attributes, id, isValid, name, touched } = field;\n\n    const obj = {\n      ...field,\n      attributes: {\n        ...attributes,\n        name: name || (attributes && attributes.name) || parent.name,\n      },\n      ...modelDefaults({ id, isValid, parent, touched }),\n    };\n\n    return field.children\n      ? {\n          ...obj,\n          children: buildModel({\n            fields: field.children,\n            parent: field,\n          }),\n        }\n      : obj;\n  });\n}\n\nconst getField = function getField(cb) {\n  return ({ fields, id, parent }) => {\n    let parentArray;\n\n    if (Array.isArray(parent)) {\n      parentArray = [];\n    } else if (typeof parent === 'string') {\n      parentArray = parent.split('-');\n    } else {\n      parentArray = [];\n    }\n\n    const parentId = parent && parentArray[0].trim() !== '' && parentArray[0];\n    const field = fields.filter(item => item.id === (parentId || id))[0] || {};\n    const index = fields.findIndex(item => item.id === (parentId || id));\n\n    return field.children\n      ? getField(cb)({\n          fields: field.children,\n          parent: parentArray.splice(1, parent.length),\n          id,\n        })\n      : cb({ data: field, index });\n  };\n};\n\nfunction updateState({ fields, ...state }, payload) {\n  const { type, attributes, id, model, parent, ...dataRest } = payload;\n\n  switch (type) {\n    case 'FORM_REPLACE':\n      return model;\n    case 'FORM_UPDATE': {\n      const parentId =\n        parent.length > 0 && parent[0].trim() !== '' && parent[0];\n      const field = fields.filter(item => item.id === (parentId || id))[0];\n      const index = fields.findIndex(item => item.id === (parentId || id));\n\n      const parentData = () => {\n        const buildFieldChildren = children => {\n          return children.map(child => {\n            const childUpdate =\n              child.id === id\n                ? {\n                    ...dataRest,\n                    attributes: {\n                      ...child.attributes,\n                      ...attributes,\n                    },\n                  }\n                : {\n                    ...(child.children\n                      ? { children: buildFieldChildren(child.children) }\n                      : {}),\n                  };\n\n            return {\n              ...child,\n              dirty: true,\n              touched: true,\n              ...childUpdate,\n            };\n          });\n        };\n\n        return {\n          ...field,\n          ...dataRest,\n          attributes: {\n            ...field.attributes,\n            ...attributes,\n            dirty: true,\n            touched: true,\n          },\n          ...(field.children\n            ? { children: buildFieldChildren(field.children) }\n            : {}),\n        };\n      };\n\n      const fieldData = () => {\n        return {\n          ...field,\n          ...dataRest,\n          attributes: {\n            ...field.attributes,\n            ...attributes,\n          },\n          dirty: true,\n          touched: true,\n        };\n      };\n\n      const data = parent.length > 0 ? parentData() : fieldData();\n\n      const isUndefined = value => typeof value === 'undefined';\n\n      return {\n        ...state,\n        dirty: isUndefined(dataRest.dirty) ? state.dirty : true,\n        touched: isUndefined(dataRest.touched) ? state.touched : true,\n        isValid: isUndefined(dataRest.isValid)\n          ? state.isValid\n          : dataRest.isValid,\n        fields:\n          index === 0\n            ? [data, ...fields.slice(1, fields.length)]\n            : index === state.length - 1\n            ? [...fields.slice(0, fields.length - 1), data]\n            : [\n                ...fields.slice(0, index),\n                data,\n                ...fields.slice(index + 1, fields.length),\n              ],\n      };\n    }\n    default:\n      return state;\n  }\n}\n\nexport function validator({ dispatch, id, model, parent }) {\n  //TODO: fix for children. Not getting errors\n  const _field =\n    //field ||\n    getField(({ data }) => data)({\n      id,\n      parent,\n      fields: model.fields,\n    });\n\n  if (!_field) return false;\n\n  const { isValid, validate: fieldValidation } = _field;\n  const { value = '', required = null, checked = null } =\n    _field.attributes || {};\n\n  const payload = { id: id, parent };\n  const hasChecked = checked == null;\n  const hasValue = value || value.trim() !== '';\n\n  const notValid =\n    (required && hasChecked && !hasValue) ||\n    (fieldValidation && fieldValidation(_field, model, dispatch));\n\n  if (!notValid !== isValid && !isEmpty(_field)) {\n    dispatch({\n      type: 'FORM_UPDATE',\n      ...payload,\n      isValid: !notValid,\n    });\n  }\n\n  return !notValid;\n}\n"]}]}